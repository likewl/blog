æ•°æ®åº“è¿æ¥å¤±è´¥panic: Error 1045: Access denied for user 'root'@'localhost' (using password: YES)

goroutine 1 [running]:
main.main()
	/usr/workspace/src/blog/main.go:25 +0x1468
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- tag.html
	- index.html
	- user-edit.html
	- 404.html
	- footer1.html
	- blogs.html
	- login.html
	- tags-edit.html
	- research.html
	- header
	- footer1
	- types-edit.html
	- archives.html
	- type.html
	- header1
	- blogs-input.html
	- admin/index.html
	- about.html
	- header1.html
	- 
	- header.html
	- tags-input.html
	- types.html
	- admin/types.html
	- blog.html
	- pages/index.html
	- blogs-edit.html
	- tags.html
	- admin/tags.html
	- types-input.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :8080
[GIN-debug] [ERROR] listen tcp :8080: bind: address already in use
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- tags-input.html
	- types.html
	- archives.html
	- pages/index.html
	- 
	- blogs-input.html
	- tags-edit.html
	- login.html
	- blog.html
	- footer1
	- types-input.html
	- header1
	- index.html
	- tags.html
	- types-edit.html
	- footer1.html
	- header1.html
	- research.html
	- admin/tags.html
	- 404.html
	- about.html
	- admin/types.html
	- user-edit.html
	- tag.html
	- blogs-edit.html
	- blogs.html
	- header.html
	- header
	- type.html
	- admin/index.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :8080

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:09:44][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:09:46][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:46][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:09:46][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:09:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:09:47][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:47][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:09:47][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:09:47][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/ --> /admin/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
<nil> è·å–user
<nil> æ ¡éªŒé”™è¯¯

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:51][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:53][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
<nil> err
admin ç™»å½•äº†
[GIN-debug] redirecting request 301: /admin/ --> /admin/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:53][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:09:54][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:09:54][0m  [36;1m[0.47ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-19 18:32:31} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:09:54][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
[GIN-debug] redirecting request 301: /admin/user/ --> /admin/user/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:10:01][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/tag/ --> /admin/tag/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:27][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/type/ --> /admin/type/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:28][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:28][0m  [36;1m[0.28ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:29][0m  [36;1m[0.68ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:11:29][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-19 18:32:31} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:29][0m  [36;1m[0.31ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:32][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:32][0m  [36;1m[0.27ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:11:32][0m  [36;1m[0.22ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
{0    0         [] 0 {0  []} 0 0 0} ceshi
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.57ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.22ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
{0 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) # æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892 https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg 7 åŸåˆ› æ˜¯ æ˜¯ æ˜¯ æ˜¯ ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹   [] 1 {0  []} 0 0 0} ceshi

[35m(/usr/workspace/src/blog/dao/tags.go:46)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.63ms][0m  DELETE FROM `tag_blogs`  WHERE (blog_id=1)  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 7, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:39', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/?msg=2&page=1
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.48ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:39} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:39][0m  [36;1m[0.22ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:42][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:42][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:11:42][0m  [36;1m[0.20ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
{0    0         [] 0 {0  []} 0 0 0} ceshi
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.23ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
{0 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) # æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892 https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg 7 åŸåˆ› æ˜¯ æ˜¯ æ˜¯ æ˜¯ ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹   [] 1 {0  []} 0 0 0} ceshi

[35m(/usr/workspace/src/blog/dao/tags.go:46)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.37ms][0m  DELETE FROM `tag_blogs`  WHERE (blog_id=1)  
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 7, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:47)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.31ms][0m  INSERT INTO `tag_blogs` (`tag_id`,`blog_id`) VALUES (1,1)  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:47)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.57ms][0m  INSERT INTO `tag_blogs` (`tag_id`,`blog_id`) VALUES (2,1)  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/?msg=2&page=1
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:11:56][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:12:14][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:12:17][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:12:17][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:12:17][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 8, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:12:17][0m  [36;1m[1.86ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:14:58][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:15:10][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:15:10][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:15:10][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 15, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:10][0m  [36;1m[0.46ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:15:12][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:15:12][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:15:12][0m  [36;1m[0.51ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 16, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:12][0m  [36;1m[1.74ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:51)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE ( comment_name = 'like' AND comment_email = '535889315@qq.com') ORDER BY `comments`.`id` ASC LIMIT 1  
[36;31m[0 rows affected or returned ][0m 
è¿›å…¥äº†1

[35m(/usr/workspace/src/blog/dao/comment.go:11)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.38ms][0m  INSERT INTO `comments` (`blog_id`,`re_comment_id`,`comment_name`,`re_comment_name`,`comment_email`,`img`,`comment_content`,`comment_time`) VALUES (1,-1,'like','','535889315@qq.com','/static/images/header.jpg','æµ‹è¯•è¯„è®ºåŠŸèƒ½','2020-07-20 13:15:32')  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[1 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 9, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:15:32][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:15:41][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:15:41][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:15:41][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 7, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:41][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:51)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE ( comment_name = 'æµ‹è¯•å‘˜1' AND comment_email = 'admin@qq.com') ORDER BY `comments`.`id` ASC LIMIT 1  
[36;31m[0 rows affected or returned ][0m 
è¿›å…¥äº†3

[35m(/usr/workspace/src/blog/dao/comment.go:11)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.65ms][0m  INSERT INTO `comments` (`blog_id`,`re_comment_id`,`comment_name`,`re_comment_name`,`comment_email`,`img`,`comment_content`,`comment_time`) VALUES (1,1,'æµ‹è¯•å‘˜1','like','admin@qq.com','/static/images/å¤´åƒ1.png','æµ‹è¯•å›å¤åŠŸèƒ½','2020-07-20 13:15:56')  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[1 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 10, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:15:56][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[1 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 11, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:06][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:51)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE ( comment_name = 'ç‹—ç§‘' AND comment_email = '1037432782@qq.com') ORDER BY `comments`.`id` ASC LIMIT 1  
[36;31m[0 rows affected or returned ][0m 
è¿›å…¥äº†3

[35m(/usr/workspace/src/blog/dao/comment.go:11)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.42ms][0m  INSERT INTO `comments` (`blog_id`,`re_comment_id`,`comment_name`,`re_comment_name`,`comment_email`,`img`,`comment_content`,`comment_time`) VALUES (1,-1,'ç‹—ç§‘','','1037432782@qq.com','/static/images/å¤´åƒ1.png','æµ‹è¯•','2020-07-20 13:16:26')  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.53ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 12, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[2.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.53ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:26][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:16:57][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:51)[0m 
[33m[2020-07-20 13:16:57][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE ( comment_name = 'è‚–æµ©' AND comment_email = '1037432782@qq.com') ORDER BY `comments`.`id` ASC LIMIT 1  
[36;31m[0 rows affected or returned ][0m 
è¿›å…¥äº†3

[35m(/usr/workspace/src/blog/dao/comment.go:11)[0m 
[33m[2020-07-20 13:16:57][0m  [36;1m[0.66ms][0m  INSERT INTO `comments` (`blog_id`,`re_comment_id`,`comment_name`,`re_comment_name`,`comment_email`,`img`,`comment_content`,`comment_time`) VALUES (1,2,'è‚–æµ©','æµ‹è¯•å‘˜1','1037432782@qq.com','/static/images/å¤´åƒ3.png','æµ‹è¯•æˆåŠŸ','2020-07-20 13:16:57')  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 13, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:16:58][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 14, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:20:36][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 15, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.37ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.54ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:21:17][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.71ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.76ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.66ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 16, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.28ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:32][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.52ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 17, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:39][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 18, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:22:43][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:22:47][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:22:48][0m  [36;1m[0.50ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:48][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:48][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:22:48][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:22:49][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:49][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:49][0m  [36;1m[0.63ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:22:49][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:50][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.77ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.30ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.92ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[1.43ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.95ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.60ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.53ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:51][0m  [36;1m[0.54ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:52][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.73ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.57ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:22:53][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:22:54][0m  [36;1m[0.49ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:54][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:54][0m  [36;1m[0.65ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:22:54][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:22:55][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:22:57][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:22:57][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:22:57][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 17, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:22:57][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:23:05][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:23:05][0m  [36;1m[0.22ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:23:05][0m  [36;1m[0.21ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
{0    0         [] 0 {0  []} 0 0 0} ceshi

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:24:21][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:24:23][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:24:23][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:24:23][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 18, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:23][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:24:27][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.26ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.69ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[1.76ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.57ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:28][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:30][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.58ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.55ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:31][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:24:32][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[2.21ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.41ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:33][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:35][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.51ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:36][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:24:37][0m  [36;1m[0.51ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:37][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:37][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:24:37][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:38][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.58ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:24:39][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.63ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:24:55][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:24:57][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:57][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:57][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:24:57][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:24:58][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:24:59][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:24:59][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:24:59][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:24:59][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.27ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:25:00][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:26:15][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:26:16][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:16][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:16][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:26:16][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:26:17][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:26:19][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:26:20][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:20][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:20][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:26:20][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.26ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:26:21][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:26:22][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:26:22][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:26:22][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 8, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = '', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:26:22][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:29:29][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:29:29][0m  [36;1m[0.50ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:29:29][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:29:34][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:29:34][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:29:34][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 9, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:29:34][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:29:47][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 19, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:29:49][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[0 rows affected or returned ][0m 
[]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:51)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.51ms][0m  SELECT * FROM `comments`  WHERE ( comment_name = 'like' AND comment_email = '535889315@qq.com') ORDER BY `comments`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 
è¿›å…¥äº†1

[35m(/usr/workspace/src/blog/dao/comment.go:11)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.33ms][0m  INSERT INTO `comments` (`blog_id`,`re_comment_id`,`comment_name`,`re_comment_name`,`comment_email`,`img`,`comment_content`,`comment_time`) VALUES (1,3,'like','ç‹—ç§‘','535889315@qq.com','/static/images/header.jpg','ï¼Ÿï¼Ÿï¼Ÿ','2020-07-20 13:30:17')  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 20, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:17][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 21, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[1.76ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:28][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:30:46][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:30:46][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:30:46][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 22, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:30:46][0m  [36;1m[0.32ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:47][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:47][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:47][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:47][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:30:47][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 23, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[1.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:31:46][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 24, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:33][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 25, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[2.57ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:37][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.54ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.56ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 26, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.34ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.47ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:42][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 27, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.47ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:34:52][0m  [36;1m[0.28ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 28, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.32ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.50ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:04][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 29, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:06][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.62ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 30, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[1.83ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.50ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:35:14][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 31, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:02][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.62ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 32, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:18][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 33, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:37:56][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 34, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:08][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 35, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[1.71ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:41:16][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:41:50][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:51][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.51ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:41:53][0m  [36;1m[0.45ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:41:54][0m  [36;1m[0.59ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:41:54][0m  [36;1m[0.32ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:41:54][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:41:54][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:31][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:31][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:32][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:43:32][0m  [36;1m[0.51ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:32][0m  [36;1m[0.22ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:33][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:34][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:34][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:34][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:43:34][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:34][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:45][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:45][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:43:46][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:43:46][0m  [36;1m[0.52ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:43:46][0m  [36;1m[0.22ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:08][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:44:08][0m  [36;1m[0.28ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:09][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:44:09][0m  [36;1m[0.47ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:44:09][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:12][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:14][0m  [36;1m[0.80ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:44:14][0m  [36;1m[0.52ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:44:14][0m  [36;1m[0.22ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:44:18][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 36, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[2.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:44:33][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:45:34][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:34][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:45:34][0m  [36;1m[0.65ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:45:34][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:45:37][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:37][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:45:37][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:45:37][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:45:40][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:45:40][0m  [36;1m[0.53ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:45:40][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 10, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:40][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.85ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.31ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:45:42][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:45:44][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:44][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:45:44][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:45:44][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 37, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 13:45:46][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:45:50][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:50][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:68)[0m 
[33m[2020-07-20 13:45:50][0m  [36;1m[0.42ms][0m  SELECT * FROM `tags`  WHERE (tag_name='linuxæŒ‡ä»¤') ORDER BY `tags`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:76)[0m 
[33m[2020-07-20 13:45:50][0m  [36;1m[0.89ms][0m   SELECT b.id,b.title,b.type_id,t.tag_name,b.description,b.recommend,b.numb,b.update_time,b.image,a.`type_name`  FROM `blogs` b LEFT JOIN `tag_blogs` tb ON b.id = tb.`blog_id` LEFT JOIN tags t ON tb.`tag_id`=t.`id` LEFT JOIN `types` a ON b.type_id = a.`id` WHERE t.`id`=2 ORDER BY b.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 13:45:50][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:45:53][0m  [36;1m[0.40ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:54][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.70ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.51ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 13:45:55][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:45:56][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 13:46:49][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:06][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:06][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 13:47:06][0m  [36;1m[0.64ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 13:47:06][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:09][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:12][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:47:12][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:12][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:13][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:13][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:47:13][0m  [36;1m[0.20ms][0m  SELECT * FROM `tags`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:17][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:17][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[3 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:19][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:38][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/type/ --> /admin/type/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:38][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:38][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:39][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:41][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:44][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/tag/ --> /admin/tag/?msg=3&page=1
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:44][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:45][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:51][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/tag/ --> /admin/tag/?msg=3&page=1
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:51][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:52][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:52][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:53][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 13:47:53][0m  [36;1m[0.47ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36}]
3 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:53][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 13:47:54][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 13:47:54][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 13:47:54][0m  [36;1m[0.26ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 14:03:23][0m  [36;1m[0.64ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:23][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:23][0m  [36;1m[0.91ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 14:03:23][0m  [36;1m[0.30ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 14:03:24][0m  [36;1m[0.64ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:24][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:24][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 14:03:24][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 14:03:25][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:25][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:25][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 14:03:25][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 14:03:26][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:26][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:26][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 14:03:26][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 14:03:27][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:27][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:27][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 14:03:27][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:03:28][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 14:03:29][0m  [36;1m[0.58ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:29][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:29][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 14:03:29][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 14:03:30][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:30][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:30][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 14:03:30][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:03:31][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:36:21][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:38:36][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:38:39][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:39:22][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
3

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 14:40:15][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 14:54:20][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 14:54:20][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 14:54:20][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 11, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:54:20][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.59ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.63ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.57ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 38, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.38ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[3.82ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 14:54:24][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.50ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.25ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:47)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.30ms][0m  INSERT INTO `tag_blogs` (`tag_id`,`blog_id`) VALUES (4,4)  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:47)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.47ms][0m  INSERT INTO `tag_blogs` (`tag_id`,`blog_id`) VALUES (5,4)  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/?msg=3&page=1
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 15:24:23][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 15:24:32][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 15:24:35][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 15:24:35][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 15:24:35][0m  [36;1m[0.49ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 1, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:24:35][0m  [36;1m[1.42ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 15:27:10][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:32:05][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 15:32:05][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 15:32:05][0m  [36;1m[0.24ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 
{0    0         [] 0 {0  []} 0 0 0} ceshi

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 15:45:03][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 15:59:07][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 16:57:55][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 16:58:11][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 16:58:16][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:58:55][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 16:59:03][0m  [36;1m[0.50ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:03][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:59:03][0m  [36;1m[2.33ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 16:59:03][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:06][0m  [36;1m[0.66ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:11][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 16:59:14][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 16:59:15][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:15][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:59:15][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 16:59:15][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.36ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 16:59:30][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[1.00ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.63ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:20:46][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.41ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:21:04][0m  [36;1m[0.31ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:35:57][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:35:57][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:35:57][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:35:57][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:36:11][0m  [36;1m[0.59ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:36:11][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:36:11][0m  [36;1m[0.90ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:36:11][0m  [36;1m[0.26ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:43:54][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 17:43:56][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:56][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:43:56][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 17:43:56][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:43:57][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:57][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:43:57][0m  [36;1m[0.83ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:43:57][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[2.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:58][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:43:59][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 17:44:00][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:44:01][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 17:53:27][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:53:27][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:53:27][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 17:53:27][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.82ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.38ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.31ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:54:54][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:54:56][0m  [36;1m[0.63ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:54:56][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:54:56][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:54:56][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.84ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:54:57][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:54:58][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.36ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:55:09][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:30][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:31][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[2.45ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.96ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.57ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.49ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.47ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:51][0m  [36;1m[0.49ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 17:55:53][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:53][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:55:53][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 17:55:53][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.31ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 17:55:54][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:56:04][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[0.94ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[2.56ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:58:21][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:58:47][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.75ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.82ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.35ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 17:59:53][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[1.90ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 18:00:02][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 18:11:31][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:11:31][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 18:11:31][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 18:11:31][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 18:11:32][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:11:32][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 18:11:32][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 18:11:32][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 18:11:33][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:11:33][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 18:11:33][0m  [36;1m[0.65ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 18:11:33][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 18:11:34][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 18:11:36][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 18:11:36][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 18:11:36][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 2, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 18:11:36][0m  [36;1m[0.34ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 19:12:15][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 19:12:17][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 19:12:17][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 19:12:17][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 3, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:12:17][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 19:13:50][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 19:13:50][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 19:13:50][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 4, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:13:50][0m  [36;1m[0.36ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:17:35][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:17:35][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.34ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 19:17:38][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:01:18][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:01:57][0m  [36;1m[0.93ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:04:33][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- 
	- tags-edit.html
	- types-input.html
	- archives.html
	- header1.html
	- admin/index.html
	- user-edit.html
	- footer1.html
	- pages/index.html
	- tag.html
	- research.html
	- 404.html
	- footer1
	- tags.html
	- types.html
	- admin/types.html
	- blogs-edit.html
	- blogs-input.html
	- blogs.html
	- header
	- tags-input.html
	- type.html
	- header.html
	- admin/tags.html
	- blog.html
	- index.html
	- login.html
	- types-edit.html
	- about.html
	- header1

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :8080

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.36ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:09:44][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 20:09:46][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 20:09:46][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 20:09:46][0m  [36;1m[0.51ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 5, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:09:46][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 20:18:27][0m  [36;1m[0.54ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 20:18:27][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 20:18:27][0m  [36;1m[0.55ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 6, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:27][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.79ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:18:41][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 20:18:43][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 20:18:43][0m  [36;1m[2.54ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 20:18:43][0m  [36;1m[0.46ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 12, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:43][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.58ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:18:48][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 20:18:50][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 20:18:50][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 20:18:50][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 19, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:50][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:18:53][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.41ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 39, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-20 20:18:55][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:47:01][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:47:04][0m  [36;1m[0.49ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:47:04][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:47:04][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 20:47:04][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.59ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.73ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[1.83ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:47:05][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/ --> /admin/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:17][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:19][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:51:19][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:51:19][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:19][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:39][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:51:39][0m  [36;1m[0.53ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:51:39][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:43][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:51:43][0m  [36;1m[0.48ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:51:43][0m  [36;1m[0.28ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:51:46][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:51:46][0m  [36;1m[0.50ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:51:46][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:52:26][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:52:26][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY `blogs`.`id` LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:52:26][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:52:31][0m  [36;1m[0.66ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:52:31][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 20:52:31][0m  [36;1m[0.23ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- 
	- tags-input.html
	- admin/tags.html
	- tag.html
	- blogs-edit.html
	- types.html
	- research.html
	- types-edit.html
	- footer1
	- type.html
	- archives.html
	- blog.html
	- header1
	- pages/index.html
	- blogs-input.html
	- blogs.html
	- login.html
	- 404.html
	- index.html
	- tags-edit.html
	- admin/types.html
	- footer1.html
	- admin/index.html
	- tags.html
	- about.html
	- header.html
	- header
	- types-input.html
	- user-edit.html
	- header1.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :8080

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 20:55:06][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:55:09][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:55:11][0m  [36;1m[0.75ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:55:11][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:55:11][0m  [36;1m[0.31ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:55:17][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 20:55:17][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 20:55:17][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
[GIN-debug] redirecting request 301: /admin/user/ --> /admin/user/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 20:55:18][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:49][0m  [36;1m[0.49ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 21:00:49][0m  [36;1m[0.44ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:49][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
[GIN-debug] redirecting request 301: /admin/type/ --> /admin/type/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:50][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:50][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:51][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 21:00:51][0m  [36;1m[0.50ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:51][0m  [36;1m[0.20ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
[GIN-debug] redirecting request 301: /admin/tag/ --> /admin/tag/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:52][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:53][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:53][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:54][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:55][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:55][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:00:56][0m  [36;1m[0.69ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-20 21:00:56][0m  [36;1m[0.62ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:00:56][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[0.48ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[0.75ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[2.21ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 21:01:01][0m  [36;1m[0.40ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:01:02][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:02][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:02][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 21:01:02][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.49ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 21:01:03][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 21:01:07][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:07][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:07][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 21:01:07][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.59ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.58ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 21:01:08][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:09][0m  [36;1m[0.85ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 21:01:10][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 22:23:57][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 22:24:06][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 22:24:06][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 22:24:06][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 7, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 22:24:06][0m  [36;1m[0.35ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:29:13][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:29:15][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:29:15][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:29:15][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:29:15][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:29:16][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:30:17][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:35:08][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:35:10][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- admin/index.html
	- types-input.html
	- admin/types.html
	- archives.html
	- tag.html
	- blogs-edit.html
	- tags-edit.html
	- admin/tags.html
	- blogs.html
	- types-edit.html
	- about.html
	- pages/index.html
	- header
	- index.html
	- types.html
	- footer1
	- 
	- footer1.html
	- research.html
	- type.html
	- blogs-input.html
	- header.html
	- header1.html
	- header1
	- tags-input.html
	- user-edit.html
	- blog.html
	- login.html
	- tags.html
	- 404.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :80
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- blogs-input.html
	- blogs.html
	- header.html
	- header
	- type.html
	- tags-input.html
	- 404.html
	- about.html
	- header1
	- blogs-edit.html
	- tags-edit.html
	- blog.html
	- pages/index.html
	- index.html
	- tags.html
	- admin/types.html
	- user-edit.html
	- header1.html
	- types-input.html
	- 
	- types.html
	- archives.html
	- footer1.html
	- footer1
	- admin/index.html
	- login.html
	- types-edit.html
	- research.html
	- tag.html
	- admin/tags.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :8080

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:50:28][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.48ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.39ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:50:31][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.26ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:50:38][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/20 23:50:38 http: panic serving 116.238.210.229:50391: write tcp 172.16.13.169:8080->116.238.210.229:50391: write: broken pipe
goroutine 108 [running]:
net/http.(*conn).serve.func1(0xc0000a4320)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000177720)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003fb2c0, 0xc8, 0xd0e1a0, 0xc000735650)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003fb2c0, 0xc8, 0xbf9264, 0x10, 0xb43d60, 0xc0005ab230)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0003fb2c0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0003fb2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003fb2c0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003fb2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003fb2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bd260, 0xc000203f00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bd260, 0xc000203f00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000a4320, 0xd15140, 0xc0002da700)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:04][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/20 23:51:04 http: panic serving 116.238.210.229:50436: write tcp 172.16.13.169:8080->116.238.210.229:50436: write: broken pipe
goroutine 137 [running]:
net/http.(*conn).serve.func1(0xc0000a5220)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000176050)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003dca50, 0x194, 0xd0e1a0, 0xc0005ec9c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003dca50, 0x194, 0xbf1934, 0x8, 0xb43d60, 0xc00075a5a0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0003dca50)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0003dca50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003dca50)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003dca50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0003dca50, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003dca50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bd5e0, 0xc000758100)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bd5e0, 0xc000758100)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000a5220, 0xd15140, 0xc000732b40)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:51:08][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:30][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/20 23:51:30 http: panic serving 116.238.210.229:50451: write tcp 172.16.13.169:8080->116.238.210.229:50451: write: broken pipe
goroutine 191 [running]:
net/http.(*conn).serve.func1(0xc0000a4fa0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000176c30)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003dc4b0, 0x194, 0xd0e1a0, 0xc0005b2ab0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003dc4b0, 0x194, 0xbf1934, 0x8, 0xb43d60, 0xc0001da690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0003dc4b0)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0003dc4b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003dc4b0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003dc4b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0003dc4b0, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003dc4b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bc8c0, 0xc0000e4c00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bc8c0, 0xc0000e4c00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000a4fa0, 0xd15140, 0xc00031ad80)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:51:32][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/20 23:51:32 http: panic serving 116.238.210.229:50456: write tcp 172.16.13.169:8080->116.238.210.229:50456: write: broken pipe
goroutine 218 [running]:
net/http.(*conn).serve.func1(0xc0000a5d60)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000177310)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003dcb40, 0xc8, 0xd0e1a0, 0xc0006c3c50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003dcb40, 0xc8, 0xbf9264, 0x10, 0xb43d60, 0xc0005db830)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0003dcb40)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0003dcb40)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003dcb40)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003dcb40)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003dcb40)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bcc40, 0xc0003eca00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bcc40, 0xc0003eca00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000a5d60, 0xd15140, 0xc0005a7340)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.82ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/20 23:51:36 http: panic serving 116.238.210.229:50461: write tcp 172.16.13.169:8080->116.238.210.229:50461: write: broken pipe
goroutine 246 [running]:
net/http.(*conn).serve.func1(0xc0003b7cc0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000177bd0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003dcf00, 0xc8, 0xd0e1a0, 0xc000896a20)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003dcf00, 0xc8, 0xbf9264, 0x10, 0xb43d60, 0xc000714600)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0003dcf00)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0003dcf00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003dcf00)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003dcf00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003dcf00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bcfc0, 0xc00069cb00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bcfc0, 0xc00069cb00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b7cc0, 0xd15140, 0xc0006ad6c0)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:36][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/20 23:51:36 http: panic serving 116.238.210.229:50462: write tcp 172.16.13.169:8080->116.238.210.229:50462: write: broken pipe
goroutine 273 [running]:
net/http.(*conn).serve.func1(0xc00016e780)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001763c0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003dc2d0, 0x194, 0xd0e1a0, 0xc0008d5200)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003dc2d0, 0x194, 0xbf1934, 0x8, 0xb43d60, 0xc000654630)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0003dc2d0)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0003dc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003dc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003dc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0003dc2d0, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003dc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12980, 0xc0000bc0e0, 0xc00087eb00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000bc380, 0xd12980, 0xc0000bc0e0, 0xc00087eb00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc00016e780, 0xd15140, 0xc0008859c0)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:51:48][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:48][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:48][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:51:48][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:51:49][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:51:50][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:51:50][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:51:50][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 8, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:50][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:51:58][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:52:36][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:52:36][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:52:36][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:52:36][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:52:37][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 23:52:40][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:52:40][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:52:40][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 23:52:40][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:52:41][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:53:05][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:53:07][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.26ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.32ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:53:08][0m  [36;1m[0.43ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:53:19][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:55:59][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- index.html
	- login.html
	- tags.html
	- pages/index.html
	- blogs-input.html
	- blogs.html
	- user-edit.html
	- header1
	- research.html
	- admin/types.html
	- footer1
	- tag.html
	- tags-input.html
	- admin/tags.html
	- types-edit.html
	- blogs-edit.html
	- about.html
	- 
	- admin/index.html
	- 404.html
	- type.html
	- header
	- tags-edit.html
	- blog.html
	- footer1.html
	- header1.html
	- header.html
	- types-input.html
	- types.html
	- archives.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :80

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:57:49][0m  [36;1m[0.43ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:57:51][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:57:53][0m  [36;1m[0.41ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:57:54][0m  [36;1m[0.63ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:57:54][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:57:54][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:57:54][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.36ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:57:55][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:58:06][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:58:17][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:58:19][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:19][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:58:19][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:58:19][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 23:58:20][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:20][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:58:20][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 23:58:20][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.63ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.75ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:24][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.71ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[1.17ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[2.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-20 23:58:25][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:58:29][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:58:29][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:58:29][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 9, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:29][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:58:34][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:58:34][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:58:34][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 10, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:34][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:58:53][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:58:53][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:58:53][0m  [36;1m[0.53ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 11, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:58:53][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:59:09][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:59:09][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:59:09][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 12, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:09][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:59:15][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:59:15][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:59:15][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 13, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:15][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-20 23:59:24][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:24][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:59:24][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-20 23:59:24][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:59:26][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:59:26][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:59:26][0m  [36;1m[0.37ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 13, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:26][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:59:30][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:59:30][0m  [36;1m[0.53ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:59:30][0m  [36;1m[0.54ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 14, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:30][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-20 23:59:46][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:46][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:68)[0m 
[33m[2020-07-20 23:59:46][0m  [36;1m[0.42ms][0m  SELECT * FROM `tags`  WHERE (tag_name='linuxæŒ‡ä»¤') ORDER BY `tags`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:76)[0m 
[33m[2020-07-20 23:59:46][0m  [36;1m[0.93ms][0m   SELECT b.id,b.title,b.type_id,t.tag_name,b.description,b.recommend,b.numb,b.update_time,b.image,a.`type_name`  FROM `blogs` b LEFT JOIN `tag_blogs` tb ON b.id = tb.`blog_id` LEFT JOIN tags t ON tb.`tag_id`=t.`id` LEFT JOIN `types` a ON b.type_id = a.`id` WHERE t.`id`=2 ORDER BY b.id  DESC LIMIT 10 OFFSET 0  
[36;31m[3 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-20 23:59:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[0.84ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[1.06ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[0.29ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[0.44ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[0.39ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-20 23:59:50][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-20 23:59:51][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-20 23:59:51][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-20 23:59:51][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 15, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-20 23:59:51][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.49ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.49ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 40, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.42ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.62ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:00:12][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:00:18][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:00:18][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:00:18][0m  [36;1m[0.36ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 20, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:00:18][0m  [36;1m[1.83ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:00:32][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:00:32][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:00:32][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 16, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:00:32][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:02:13][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:02:13][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:02:13][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 17, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:13][0m  [36;1m[1.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.69ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:02:24][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:25][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:02:26][0m  [36;1m[0.39ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:02:32][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.58ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:02:35][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:07:30][0m  [36;1m[0.49ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:07:30][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:07:30][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 41, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:07:30][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:07:31][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:07:31][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:07:31][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:07:31][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:07:31][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 42, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[1.87ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:08:19][0m  [36;1m[0.32ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:08:29][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:08:30][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:08:30][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:08:30][0m  [36;1m[0.53ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 18, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:08:30][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:08:42][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:08:42][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:08:42][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 19, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:08:42][0m  [36;1m[1.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:09][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:09][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:09][0m  [36;1m[0.49ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 20, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:09][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:16][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:16][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:16][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 21, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:16][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[1.36ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:09:21][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:22][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:22][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:22][0m  [36;1m[0.46ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 22, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:22][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:28][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:28][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:28][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 23, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:28][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:33][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:33][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:33][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 24, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:33][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:37][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:37][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:37][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 25, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:37][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:43][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:43][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:43][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 26, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:43][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:46][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:46][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:46][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 27, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:46][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:09:51][0m  [36;1m[0.60ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:51][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:09:51][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:09:51][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:09:53][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:09:53][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:09:53][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 28, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:53][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:09:59][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:10:01][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:10:01][0m  [36;1m[0.55ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:10:01][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 14, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:01][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:05][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:10:12][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:10:12][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:10:12][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 15, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:12][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:10:19][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:10:20][0m  [36;1m[0.48ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:10:20][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:10:20][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 21, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:20][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.70ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.72ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[2.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:21][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 00:10:22][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:22][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:22][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 00:10:22][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:10:23][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:23][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:23][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:10:23][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:10:24][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:10:26][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:10:26][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:10:26][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 22, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:26][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:10:27][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:10:31][0m  [36;1m[0.57ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:31][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:31][0m  [36;1m[0.85ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:10:31][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 00:10:32][0m  [36;1m[0.60ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:32][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:32][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 00:10:32][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:10:33][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:34][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.49ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:10:35][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:22][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.99ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[1.94ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.74ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:33][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:12:35][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.35ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:12:36][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:12:37][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:12:38][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:12:38][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:12:38][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 29, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:38][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:12:43][0m  [36;1m[0.44ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:12:43][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:12:43][0m  [36;1m[0.56ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 30, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:12:43][0m  [36;1m[1.87ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:21:01][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.50ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.52ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 43, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 00:21:07][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:21:17][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:21:19][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:21:19][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:21:19][0m  [36;1m[0.49ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 31, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:19][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:29][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:29][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:21:29][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:21:29][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 00:21:31][0m  [36;1m[0.58ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:31][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:21:31][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 00:21:31][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:137)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:150)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.69ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:162)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:21:32][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/ --> /admin/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:36][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/blog/ --> /admin/blog/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:38)[0m 
[33m[2020-07-21 00:21:37][0m  [36;1m[0.48ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.recommend,blogs.update_time FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 
&[{4 æœ¬åšå®¢å¼€æºå…¬å‘Š 0 åšå®¢å…¬å‘Š æ˜¯ 2020-07-20 15:24:23} {3 è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢ 0 linux æ˜¯ 2020-07-19 19:05:36} {2 mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ 0 mysql æ˜¯ 2020-07-19 18:59:30} {1 golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux) 0 go æ˜¯ 2020-07-20 13:11:56}]
4 ceshi

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:37][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
0
[GIN-debug] redirecting request 301: /admin/type/ --> /admin/type/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:37][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:38][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:39][0m  [36;1m[0.74ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:43][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:16)[0m 
[33m[2020-07-21 00:21:43][0m  [36;1m[0.48ms][0m  UPDATE `types` SET `type_name` = 'å…¬å‘Š'  WHERE (id = 4)  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /admin/type/ --> /admin/type/
ä¸­é—´ä»¶å¼€å§‹æ ¡éªŒ
admin è·å–user
admin æ ¡éªŒæ­£ç¡®

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:43][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:43][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /types --> /types

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:49][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:49][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:21:49][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:21:49][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:51][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:21:51][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:21:51][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 00:21:51][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 00:21:52][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 00:21:52][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 00:21:52][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 32, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:21:52][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:22:34][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.49ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:25:39][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:25:40][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] HEAD   /static/*filepath         --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (2 handlers)
[GIN-debug] Loaded HTML Templates (30): 
	- pages/index.html
	- admin/tags.html
	- types-input.html
	- 404.html
	- footer1.html
	- footer1
	- header
	- tags-input.html
	- types-edit.html
	- login.html
	- type.html
	- index.html
	- tags-edit.html
	- header1.html
	- blogs-input.html
	- blog.html
	- archives.html
	- 
	- admin/types.html
	- user-edit.html
	- header1
	- tag.html
	- blogs-edit.html
	- header.html
	- admin/index.html
	- about.html
	- research.html
	- blogs.html
	- tags.html
	- types.html

[GIN-debug] GET    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] POST   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PUT    /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] PATCH  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] HEAD   /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] OPTIONS /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] DELETE /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] CONNECT /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] TRACE  /                         --> blog/controller/page.IndexHandler (2 handlers)
[GIN-debug] GET    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] POST   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PUT    /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] PATCH  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] HEAD   /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] OPTIONS /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] DELETE /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] CONNECT /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] TRACE  /research                 --> blog/controller/page.ResearchHandler (2 handlers)
[GIN-debug] GET    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] POST   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PUT    /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] PATCH  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] HEAD   /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] OPTIONS /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] DELETE /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] CONNECT /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] TRACE  /blogs/page/:page         --> blog/controller/page.PagesHandler (2 handlers)
[GIN-debug] GET    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] POST   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PUT    /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] PATCH  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] HEAD   /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] OPTIONS /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] DELETE /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] CONNECT /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] TRACE  /comments                 --> blog/controller/page.CommentHandler (2 handlers)
[GIN-debug] GET    /types                    --> blog/controller/page.TypesHandler (2 handlers)
[GIN-debug] GET    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] POST   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PUT    /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] PATCH  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] HEAD   /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] DELETE /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] CONNECT /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] TRACE  /types/:name              --> blog/controller/page.TypesNameHandler (2 handlers)
[GIN-debug] GET    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] POST   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PUT    /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] PATCH  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] HEAD   /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] OPTIONS /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] DELETE /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] CONNECT /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] TRACE  /types/:name/:id          --> blog/controller/page.BlogHandler (2 handlers)
[GIN-debug] GET    /tags                     --> blog/controller/page.TagsHandler (2 handlers)
[GIN-debug] GET    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] POST   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PUT    /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] PATCH  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] HEAD   /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] OPTIONS /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] DELETE /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] CONNECT /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] TRACE  /tags/:name               --> blog/controller/page.TagsNameHandler (2 handlers)
[GIN-debug] GET    /archives                 --> blog/controller/page.ArchivesHandler (2 handlers)
[GIN-debug] GET    /about                    --> blog/controller/page.AboutHandler (2 handlers)
[GIN-debug] GET    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] POST   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PUT    /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] PATCH  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] HEAD   /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] OPTIONS /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] DELETE /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] CONNECT /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] TRACE  /admin/login              --> blog/controller/admin.LoginHandler (2 handlers)
[GIN-debug] GET    /admin/logout             --> blog/controller/admin.LogoutHandler (2 handlers)
[GIN-debug] GET    /admin/                   --> blog/controller/admin.AdminHandler (3 handlers)
[GIN-debug] GET    /admin/index              --> blog/controller/admin.AdminIndexHandler (3 handlers)
[GIN-debug] GET    /admin/type/              --> blog/controller/admin.TypeHandler (3 handlers)
[GIN-debug] GET    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] POST   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PUT    /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] DELETE /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/edit          --> blog/controller/admin.TypeEditHandler (3 handlers)
[GIN-debug] GET    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] POST   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PUT    /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] DELETE /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/type/add           --> blog/controller/admin.TypeAddHandler (3 handlers)
[GIN-debug] GET    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] POST   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/               --> blog/controller/admin.TagHandler (3 handlers)
[GIN-debug] GET    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] POST   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/edit           --> blog/controller/admin.TagEditHandler (3 handlers)
[GIN-debug] GET    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] POST   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PUT    /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] DELETE /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/tag/add            --> blog/controller/admin.TagAddHandler (3 handlers)
[GIN-debug] GET    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] POST   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/              --> blog/controller/admin.BlogHandler (3 handlers)
[GIN-debug] GET    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] POST   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/edit          --> blog/controller/admin.BlogEditHandler (3 handlers)
[GIN-debug] GET    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] POST   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PUT    /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] PATCH  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] HEAD   /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] OPTIONS /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] DELETE /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] CONNECT /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] TRACE  /admin/blog/add           --> blog/controller/admin.BlogAddHandler (3 handlers)
[GIN-debug] GET    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] POST   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PUT    /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] PATCH  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] HEAD   /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] OPTIONS /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] DELETE /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] CONNECT /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] TRACE  /admin/user/              --> blog/controller/admin.UserEditHandler (3 handlers)
[GIN-debug] Listening and serving HTTP on :80

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:27:50][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:27:54][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.38ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:27:55][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:27:57][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:28:13][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:28:16][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.80ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:28:17][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.34ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:28:23][0m  [36;1m[0.40ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:176)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.55ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (title like '%go%') ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:121)[0m 
[33m[2020-07-21 00:28:34][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id WHERE (recommend = 'æ˜¯') ORDER BY blogs.id DESC LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.32ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 00:28:37][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 00:28:38][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:38][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 00:28:38][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 00:28:38][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 00:28:39][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 01:35:53][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 01:43:34][0m  [36;1m[0.74ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 01:43:35][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 01:43:58][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 01:44:17][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 03:05:05][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 03:13:30][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 03:20:23][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/21 03:20:23 http: panic serving 123.125.67.160:25269: write tcp 172.16.13.169:80->123.125.67.160:25269: write: broken pipe
goroutine 609 [running]:
net/http.(*conn).serve.func1(0xc0003b65a0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc00037bb80)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0x194, 0xd0e260, 0xc000274e40)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc0000de5d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bc2d0, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b65a0, 0xd15200, 0xc0003d2000)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 03:26:25][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 03:26:25 http: panic serving 216.107.139.39:47705: write tcp 172.16.13.169:80->216.107.139.39:47705: write: broken pipe
goroutine 637 [running]:
net/http.(*conn).serve.func1(0xc0003b66e0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc00037bf40)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc0002c2960)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0006561b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0000f2100)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0000f2100)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b66e0, 0xd15200, 0xc0001b2100)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 03:52:09][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 04:43:09][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 04:43:09 http: panic serving 47.101.155.38:40092: write tcp 172.16.13.169:80->47.101.155.38:40092: write: broken pipe
goroutine 692 [running]:
net/http.(*conn).serve.func1(0xc0003b65a0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc00037bf40)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc000294960)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0000de1b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0000f2000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0000f2000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b65a0, 0xd15200, 0xc0001b2040)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 05:27:46][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 05:43:39][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:07:48][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:07:49][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 06:11:18][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:12:34][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:12:35][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:24:43][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 06:24:44][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 07:02:15][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 08:38:58][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:06:46][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:50:25][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:50:37][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 09:50:37 http: panic serving 116.238.210.229:49410: write tcp 172.16.13.169:80->116.238.210.229:49410: write: broken pipe
goroutine 1087 [running]:
net/http.(*conn).serve.func1(0xc0003b7ae0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001dac30)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc0006242a0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0003ade60)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8e00, 0xc000295a00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8e00, 0xc000295a00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b7ae0, 0xd15200, 0xc0002c64c0)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:50:39][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/21 09:50:39 http: panic serving 116.238.210.229:49411: write tcp 172.16.13.169:80->116.238.210.229:49411: write: broken pipe
goroutine 1089 [running]:
net/http.(*conn).serve.func1(0xc0003b7d60)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001dafa0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc960, 0x194, 0xd0e260, 0xc0007033b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc960, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc00062cf90)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bc960)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc960)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc960)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc960)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bc960, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc960)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b9180, 0xc000295b00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b9180, 0xc000295b00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b7d60, 0xd15200, 0xc0002c66c0)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:52:21][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:21][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:21][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:52:21][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.39ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:23][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[1.01ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.58ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:24][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:25][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.70ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:26][0m  [36;1m[0.31ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:27][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[2.96ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:28][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:29][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:52:30][0m  [36;1m[0.51ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:30][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:30][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:52:30][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[2.94ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.46ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.43ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:31][0m  [36;1m[0.39ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:32][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.76ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:38][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:39][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[2.15ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.39ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:41][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:52:42][0m  [36;1m[0.61ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:42][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:42][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:52:42][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:43][0m  [36;1m[0.43ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:44][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:45][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:52:46][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.79ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.32ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:52:49][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.80ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:52:56][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:52:58][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:52:59][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.42ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:00][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:02][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:03][0m  [36;1m[0.43ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:04][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:05][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:53:09][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:10][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.72ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.34ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[1.00ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.63ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:13][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:14][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 09:53:22][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 09:53:22][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 09:53:22][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 33, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:22][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:53:26][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:26][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:26][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:53:26][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[1.92ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.41ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:53:27][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:29][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.80ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:30][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:53:31][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:31][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:31][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:53:31][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:32][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:32][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:32][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:32][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:33][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 09:53:35][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 09:53:35][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 09:53:35][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 34, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:35][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.37ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:36][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:37][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:37][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 09:53:37][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 09:53:40][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 09:53:40][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 09:53:40][0m  [36;1m[0.46ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 35, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:40][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:53:56][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:53:59][0m  [36;1m[0.61ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:53:59][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:53:59][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:53:59][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.29ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.74ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.74ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.49ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.39ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:00][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:01][0m  [36;1m[0.72ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:54:02][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:54:03][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:03][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:54:03][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:54:03][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.51ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.83ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.38ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.32ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:54:04][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:58:13][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 09:58:14][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 09:58:15][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:58:15][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:58:15][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 09:58:15][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 09:58:17][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 09:58:17][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 09:58:17][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 16, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:58:17][0m  [36;1m[1.92ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.26ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 09:58:55][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 09:58:55 http: panic serving 116.238.210.229:49807: write tcp 172.16.13.169:80->116.238.210.229:49807: write: broken pipe
goroutine 2756 [running]:
net/http.(*conn).serve.func1(0xc0000bea00)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001dab40)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc0005b6a50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0006988a0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8460, 0xc0003ca900)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8460, 0xc0003ca900)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000bea00, 0xd15200, 0xc0001b3b80)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 10:35:46][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 11:39:53][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 11:39:53 http: panic serving 106.15.201.111:59268: write tcp 172.16.13.169:80->106.15.201.111:59268: write: broken pipe
goroutine 2812 [running]:
net/http.(*conn).serve.func1(0xc0000be000)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001da730)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc0002c2930)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc00029a2a0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000be000, 0xd15200, 0xc0001b2040)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 12:28:59][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 12:36:52][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 12:53:12][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 12:53:13][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:17:39][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 14:17:40][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:17:40][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:17:40][0m  [36;1m[0.65ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 14:17:40][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:17:41][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.54ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.46ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 44, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 14:17:43][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:18:49][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[0.97ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[2.44ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:19:43][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 14:19:45][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:19:45][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:19:45][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 14:19:45][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.72ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[1.10ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 14:19:46][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:39:05][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:40:47][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.79ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:41:48][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.33ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:41:49][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:41:50][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:41:53][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:42:02][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:42:21][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.35ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:42:34][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:42:54][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:43:09][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:43:09][0m  [36;1m[0.48ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:43:09][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 17, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:09][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:43:18][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:43:18][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:43:18][0m  [36;1m[0.36ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 18, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:18][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:43:19][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.91ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:43:21][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[1.07ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[2.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[0.37ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:43:34][0m  [36;1m[0.39ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:43:36][0m  [36;1m[0.63ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:43:36][0m  [36;1m[0.80ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:43:36][0m  [36;1m[0.76ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 36, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:43:36][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:44:11][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:44:25][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.32ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:44:33][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:44:36][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:44:45][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:44:45][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:44:45][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 37, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:45][0m  [36;1m[1.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:44:58][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:44:58][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:44:58][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 38, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:44:58][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:45:01][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 14:45:02][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 14:45:02][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 14:45:02][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 39, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:45:02][0m  [36;1m[0.39ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:57:28][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 14:57:29][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:57:29][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:57:29][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 14:57:29][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:57:30][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[1.07ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[1.77ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 14:57:37][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 15:02:06][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 15:02:18][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 15:02:18][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 15:02:18][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 40, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:02:18][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 15:11:09 http: panic serving 42.120.73.179:61622: write tcp 172.16.13.169:80->42.120.73.179:61622: write: broken pipe
goroutine 4217 [running]:
net/http.(*conn).serve.func1(0xc0000be000)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066690)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc00028ca80)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc00063a180)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0000f2000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0000f2000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000be000, 0xd15200, 0xc0001b2040)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:11:09][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/21 15:11:09 http: panic serving 42.120.73.179:15095: write tcp 172.16.13.169:80->42.120.73.179:15095: write: broken pipe
goroutine 4244 [running]:
net/http.(*conn).serve.func1(0xc0000bec80)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066a00)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc690, 0x194, 0xd0e260, 0xc000601cb0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc690, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc000293890)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bc690)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bc690, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8540, 0xc000280500)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8540, 0xc000280500)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000bec80, 0xd15200, 0xc000290080)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 15:25:39][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 15:25:55][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 15:25:55][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 15:25:55][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 41, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 15:25:55][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.35ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 16:41:03][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 16:41:06][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 16:41:09][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 16:41:10][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 16:49:51][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:03:32][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.40ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:37:58][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 17:38:12][0m  [36;1m[0.92ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:38:12][0m  [36;1m[1.75ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:38:12][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 17:38:12][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 17:38:14][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:38:14][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:68)[0m 
[33m[2020-07-21 17:38:14][0m  [36;1m[0.40ms][0m  SELECT * FROM `tags`  WHERE (tag_name='é¡¹ç›®éƒ¨ç½²') ORDER BY `tags`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:76)[0m 
[33m[2020-07-21 17:38:14][0m  [36;1m[0.86ms][0m   SELECT b.id,b.title,b.type_id,t.tag_name,b.description,b.recommend,b.numb,b.update_time,b.image,a.`type_name`  FROM `blogs` b LEFT JOIN `tag_blogs` tb ON b.id = tb.`blog_id` LEFT JOIN tags t ON tb.`tag_id`=t.`id` LEFT JOIN `types` a ON b.type_id = a.`id` WHERE t.`id`=1 ORDER BY b.id  DESC LIMIT 10 OFFSET 0  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 17:38:14][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 17:38:15][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 17:38:15][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 17:38:15][0m  [36;1m[0.37ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 19, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:38:15][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.49ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:38:34][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 17:38:36][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 17:38:36][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 17:38:36][0m  [36;1m[0.48ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 42, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:38:36][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:02][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:02][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:02][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:02][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:39:03][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:06][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:06][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:06][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:06][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 17:39:07][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:07][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:07][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 17:39:07][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.37ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:39:08][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:10][0m  [36;1m[0.57ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:10][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:10][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:10][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 17:39:11][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:11][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:11][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 17:39:11][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:39:12][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 17:39:13][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:13][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:13][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 17:39:13][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:39:14][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:39:20][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 17:39:20][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 17:39:20][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 17:39:20][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 1) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 17:40:46 http: panic serving 42.120.73.177:27876: write tcp 172.16.13.169:80->42.120.73.177:27876: write: broken pipe
goroutine 5076 [running]:
net/http.(*conn).serve.func1(0xc0003b7720)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066be0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc0000efe30)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc00069ee10)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8540, 0xc00070e500)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8540, 0xc00070e500)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b7720, 0xd15200, 0xc00005a840)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:40:46][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/21 17:40:46 http: panic serving 42.120.73.177:65277: write tcp 172.16.13.169:80->42.120.73.177:65277: write: broken pipe
goroutine 5103 [running]:
net/http.(*conn).serve.func1(0xc0003b7ea0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066f50)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bd2c0, 0x194, 0xd0e260, 0xc0005dd020)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bd2c0, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc000142c00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bd2c0)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bd2c0, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b88c0, 0xc00078fb00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b88c0, 0xc00078fb00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b7ea0, 0xd15200, 0xc0006cf900)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:43:33][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 17:43:33 http: panic serving 42.120.73.177:64325: write tcp 172.16.13.169:80->42.120.73.177:64325: write: broken pipe
goroutine 5130 [running]:
net/http.(*conn).serve.func1(0xc0003b66e0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066690)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc000343110)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc00074e120)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc00070e000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc00070e000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b66e0, 0xd15200, 0xc000612000)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:48:36][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 17:48:43][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 17:48:43][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 17:48:43][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 43, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:48:43][0m  [36;1m[0.35ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:51:59][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:58:48][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.39ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:59:46][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 17:59:58][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:21][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.48ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.37ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 20, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:23][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[0.73ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[1.02ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[0.34ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:00:26][0m  [36;1m[0.43ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:28][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:28][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:28][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 44, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:28][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 18:00:29][0m  [36;1m[0.53ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:29][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:29][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 18:00:29][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:34][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:37][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:37][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:37][0m  [36;1m[0.35ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 21, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:37][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:39][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 18:00:41][0m  [36;1m[0.56ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:41][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:41][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 18:00:41][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:42][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:42][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:42][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 22, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:42][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:00:50][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:50][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:50][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:00:50][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.82ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.57ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:00:54][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:55][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:55][0m  [36;1m[0.55ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:55][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 45, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:55][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.51ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 46, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[2.21ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:00:59][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:01:43][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:01:43][0m  [36;1m[0.27ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:01:43][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 18:01:43][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:02:14][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:02:14][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:02:14][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 18:02:14][0m  [36;1m[0.50ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:02:19][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-21 18:02:19][0m  [36;1m[0.23ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-21 18:02:19][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-21 18:02:19][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:10:08][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:10:17][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:10:58][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:11:14][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:11:14][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:11:14][0m  [36;1m[0.45ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 47, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:11:14][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:11:18][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:11:18][0m  [36;1m[0.57ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:11:18][0m  [36;1m[0.53ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 48, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:11:18][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:11:20][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:11:20][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:11:20][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 49, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:11:20][0m  [36;1m[1.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:11:21][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:11:21][0m  [36;1m[0.50ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:11:21][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 50, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:11:21][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:11:32][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:12:22][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:12:22][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:12:22][0m  [36;1m[0.35ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 23, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:12:22][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[0.85ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[2.42ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:13:58][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.77ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:14:55][0m  [36;1m[0.41ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 18:14:55 http: panic serving 116.238.210.229:65199: write tcp 172.16.13.169:80->116.238.210.229:65199: write: broken pipe
goroutine 6426 [running]:
net/http.(*conn).serve.func1(0xc00021cdc0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001db4f0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc3c0, 0xc8, 0xd0e260, 0xc000673e00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc3c0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc00065b860)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc3c0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc3c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc3c0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc3c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc3c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8d20, 0xc000722300)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8d20, 0xc000722300)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc00021cdc0, 0xd15200, 0xc0001b2f40)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[0.74ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[1.11ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[0.33ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[0.52ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[0.47ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:15:56][0m  [36;1m[0.63ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 18:15:56 http: panic serving 123.151.77.123:32983: write tcp 172.16.13.169:80->123.151.77.123:32983: write: broken pipe
goroutine 6453 [running]:
net/http.(*conn).serve.func1(0xc0000be8c0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001dbbd0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bd2c0, 0xc8, 0xd0e260, 0xc00078eb10)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bd2c0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0006d46f0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bd2c0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bd2c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b90a0, 0xc000684b00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b90a0, 0xc000684b00)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000be8c0, 0xd15200, 0xc00065f900)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:16:00][0m  [36;1m[0.48ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/21 18:16:00 http: panic serving 124.64.19.27:2968: write tcp 172.16.13.169:80->124.64.19.27:2968: write: broken pipe
goroutine 6482 [running]:
net/http.(*conn).serve.func1(0xc00021c640)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001da3c0)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0x194, 0xd0e260, 0xc0003734d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc00065a7b0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bc2d0, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0000f2200)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0000f2200)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc00021c640, 0xd15200, 0xc0001b2180)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.86ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.73ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:03][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.70ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.36ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:16:22][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:17:05][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:17:05][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:17:05][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 24, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:17:05][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:20:31][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:20:31][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:20:32][0m  [36;1m[0.40ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 25, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:20:32][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:22:24][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:22:24][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:22:24][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 51, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:22:24][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:22:47][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 18:31:35][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 18:31:35][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 18:31:35][0m  [36;1m[0.37ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 26, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:31:35][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:32:45][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.59ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.71ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:32:47][0m  [36;1m[0.32ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:52:28][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 18:54:28][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.25ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:55][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-21 18:56:57][0m  [36;1m[0.57ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:56:57][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 18:56:57][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-21 18:56:57][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.63ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.69ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.40ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 18:56:59][0m  [36;1m[0.66ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 19:00:05][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.90ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 19:58:39][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/21 19:59:07 http: panic serving 196.52.43.58:53592: write tcp 172.16.13.169:80->196.52.43.58:53592: write: connection reset by peer
goroutine 7019 [running]:
net/http.(*conn).serve.func1(0xc0003b65a0)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc0001da690)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0003f8f00, 0xc8, 0xd0e260, 0xc00065d590)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0003f8f00, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc000342120)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0003f8f00)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0003f8f00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0003f8f00)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0003f8f00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0003f8f00)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b80e0, 0xc0003ca000)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0003b65a0, 0xd15200, 0xc000622000)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 20:16:28][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 20:27:28][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 20:43:30][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 20:47:56][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 21:07:54][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:13:58][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:14:38][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 21:38:41][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 21:38:41][0m  [36;1m[0.54ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 21:38:41][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 27, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:38:41][0m  [36;1m[0.41ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.45ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.45ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 45, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[1.89ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-21 21:38:45][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 21:43:48][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 22:29:32][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-21 22:29:34][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-21 22:29:34][0m  [36;1m[0.55ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-21 22:29:34][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 28, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 22:29:34][0m  [36;1m[0.34ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 23:07:53][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-21 23:08:26][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-21 23:40:37][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 00:05:51][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.80ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 00:05:53][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:09:27][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:13:08][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 01:13:12][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 01:13:12][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 01:13:12][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 52, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:13:12][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:13:38][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:13:38][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:13:38][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:13:38][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:13:39][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:13:39][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.58ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.60ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 01:13:42][0m  [36;1m[0.31ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 01:13:48][0m  [36;1m[0.41ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 01:13:48][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 01:13:48][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 23, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:13:48][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:14:24][0m  [36;1m[0.39ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.47ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 46, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.35ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 01:14:33][0m  [36;1m[0.31ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.31ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:30:29][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.69ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.93ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.38ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.34ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 01:50:55][0m  [36;1m[0.42ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 02:22:43][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 02:41:39][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 02:42:17][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:23:29][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:23:37][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:27:43][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:27:43][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:39:59][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:40:41][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 03:54:54][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:09:47][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:32:15][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 04:48:06][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:11][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:22][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 04:49:23][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.84ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.37ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 04:49:28][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.31ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 04:49:44][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 05:28:42][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:07][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:08][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:08][0m  [36;1m[0.72ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:09][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 08:07:10][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 08:07:14][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 08:08:14][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 08:08:14][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 08:08:14][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 24, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:08:14][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 08:08:17][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 3)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 08:08:17][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=3  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 08:08:17][0m  [36;1m[0.46ms][0m  UPDATE `blogs` SET `title` = 'mysql5.7 æŸ¥è¯¢æ•°æ®ï¼Œgroup by æŠ¥é”™ï¼šExpression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_byï¼Ÿ', `content` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯
```
Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column 't.id' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

```
æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š
### ç¬¬ä¸€æ­¥ï¼š
```
select @@GLOBAL.sql_mode;
```
å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š
```
ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

```
### ç¬¬äºŒæ­¥ï¼š
```
set global sql_mode ='STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';

set session sql_mode= 'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
```
å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚', `image` = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2507389442,2201469096&fm=26&gp=0.jpg', `numb` = 25, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢ï¼Œç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼ŒåŸæ¥æ˜¯mysql57çš„æ–°åŠŸèƒ½
', `creat_time` = '2020-07-19 18:58:22', `update_time` = '2020-07-19 18:59:30', `type_id` = 3, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 2  
[36;31m[1 rows affected or returned ][0m 
<p>åœ¨åšå½’æ¡£åŠŸèƒ½æ—¶ç”¨åˆ°äº†åˆ†ç»„æŸ¥è¯¢
ç»“æœå‡ºç°äº†è¿™æ ·çš„é”™è¯¯</p>

<pre><code>Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#39;t.id&#39; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by

</code></pre>

<p>æŸ¥è¯¢æ‰çŸ¥é“
mysql 5.7 åŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œonly_full_group_byï¼Œå®ƒåªå…è®¸ä½ çš„æŸ¥è¯¢å­—æ®µæ˜¯åŒ…æ‹¬åœ¨ group by é‡Œé¢çš„å­—æ®µï¼Œè¿™ç§æ¨¡å¼å¯¼è‡´æ— æ³•æˆ‘ä»¬æ— æ³•å¾—åˆ°æƒ³è¦çš„å­—æ®µå€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¦ç”¨æ‰ only_full_group_byï¼š</p>

<h3>ç¬¬ä¸€æ­¥ï¼š</h3>

<pre><code>select @@GLOBAL.sql_mode;
</code></pre>

<p>å¾—åˆ°ç°æœ‰çš„ sql_mode, å¦‚ä¸‹ï¼š</p>

<pre><code>ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

</code></pre>

<h3>ç¬¬äºŒæ­¥ï¼š</h3>

<pre><code>set global sql_mode =&#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;

set session sql_mode= &#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&#39;;
</code></pre>

<p>å»é™¤ ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®ï¼Œå°± ok äº†ã€‚</p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:08:17][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.36ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.32ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 08:09:36][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:09:47][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:09:47][0m  [36;1m[0.26ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:09:47][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-22 08:09:47][0m  [36;1m[0.49ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 1) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.21ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 1) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.25ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-22 08:09:50][0m  [36;1m[0.48ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 1) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:09:58][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:09:58][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:09:58][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:09:58][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:10:01][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 08:10:09][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 08:10:09][0m  [36;1m[0.46ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 08:10:09][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 53, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:10:09][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:11:05][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:11:05][0m  [36;1m[0.24ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:11:05][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
1

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-22 08:11:05][0m  [36;1m[0.46ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 1) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 
[GIN-debug] redirecting request 301: /types --> /types??????/4

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 47, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.40ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 08:13:52][0m  [36;1m[0.34ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:15:15][0m  [36;1m[0.91ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:15:15][0m  [36;1m[1.65ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:15:15][0m  [36;1m[0.83ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:15:15][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:21:57][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 08:23:16][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:23:18][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:18][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:23:18][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:23:18][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 08:23:21][0m  [36;1m[0.64ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:21][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:23:21][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 08:23:21][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 08:23:25][0m  [36;1m[0.52ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:25][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:68)[0m 
[33m[2020-07-22 08:23:25][0m  [36;1m[0.44ms][0m  SELECT * FROM `tags`  WHERE (tag_name='é¡¹ç›®éƒ¨ç½²') ORDER BY `tags`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:76)[0m 
[33m[2020-07-22 08:23:25][0m  [36;1m[0.91ms][0m   SELECT b.id,b.title,b.type_id,t.tag_name,b.description,b.recommend,b.numb,b.update_time,b.image,a.`type_name`  FROM `blogs` b LEFT JOIN `tag_blogs` tb ON b.id = tb.`blog_id` LEFT JOIN tags t ON tb.`tag_id`=t.`id` LEFT JOIN `types` a ON b.type_id = a.`id` WHERE t.`id`=1 ORDER BY b.id  DESC LIMIT 10 OFFSET 0  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 08:23:25][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.72ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.82ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.87ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.88ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.49ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.45ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.45ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:23:29][0m  [36;1m[0.44ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:23:34][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 08:26:11][0m  [36;1m[0.52ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:26:11][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:26:11][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 08:26:11][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.74ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.37ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 08:29:05][0m  [36;1m[0.31ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 08:34:02][0m  [36;1m[0.56ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 08:34:02][0m  [36;1m[0.31ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 08:34:02][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 08:34:02][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:08:37][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:08:40][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:40][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.97ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[2.33ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:45][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.79ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:47][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:48][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:24:49][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:50][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:24:50][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 09:34:49][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 10:42:10][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.69ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 10:59:28][0m  [36;1m[0.41ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:10:29][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.29ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:13:54][0m  [36;1m[0.41ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
2020/07/22 11:13:54 http: panic serving 223.84.146.252:37283: write tcp 172.16.13.169:80->223.84.146.252:37283: write: broken pipe
goroutine 9801 [running]:
net/http.(*conn).serve.func1(0xc0000be140)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066780)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc2d0, 0xc8, 0xd0e260, 0xc000298f30)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc2d0, 0xc8, 0xbf926d, 0x10, 0xb43d60, 0xc0002843c0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.IndexHandler(0xc0005bc2d0)
	/usr/workspace/src/blog/controller/page/pagesController.go:22 +0x570
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc2d0)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:409 +0x666
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b81c0, 0xc0000f2100)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b81c0, 0xc0000f2100)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000be140, 0xd15200, 0xc0003d2140)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:13:55][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
2020/07/22 11:13:55 http: panic serving 223.84.146.252:37282: write tcp 172.16.13.169:80->223.84.146.252:37282: write: broken pipe
goroutine 9803 [running]:
net/http.(*conn).serve.func1(0xc0000be640)
	/usr/local/go/src/net/http/server.go:1772 +0x139
panic(0xb50ee0, 0xc000066b40)
	/usr/local/go/src/runtime/panic.go:975 +0x3e3
github.com/gin-gonic/gin.(*Context).Render(0xc0005bc690, 0x194, 0xd0e260, 0xc00061e090)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:842 +0x173
github.com/gin-gonic/gin.(*Context).HTML(0xc0005bc690, 0x194, 0xbf193d, 0x8, 0xb43d60, 0xc0002d7c50)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:851 +0x99
blog/controller/page.NotFoundHandler(0xc0005bc690)
	/usr/workspace/src/blog/controller/page/404.go:12 +0x120
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-contrib/sessions.Sessions.func1(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-contrib/sessions@v0.0.3/sessions.go:52 +0x16d
github.com/gin-gonic/gin.(*Context).Next(0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/context.go:161 +0x3b
github.com/gin-gonic/gin.serveError(0xc0005bc690, 0x194, 0x1248dc0, 0x12, 0x12)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:445 +0x38
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0xc0003b8500, 0xc0005bc690)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:438 +0x3d3
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0xc0003b8500, 0xd12a40, 0xc0000b8620, 0xc0000f2200)
	/usr/workspace/pkg/mod/github.com/gin-gonic/gin@v1.6.3/gin.go:367 +0x14d
net/http.serverHandler.ServeHTTP(0xc0000b8380, 0xd12a40, 0xc0000b8620, 0xc0000f2200)
	/usr/local/go/src/net/http/server.go:2807 +0xa3
net/http.(*conn).serve(0xc0000be640, 0xd15200, 0xc0003d2480)
	/usr/local/go/src/net/http/server.go:1895 +0x86c
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2933 +0x35c

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.50ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:13:58][0m  [36;1m[0.37ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[0.66ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[1.89ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:14:24][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:14:28][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.24ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.62ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.72ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.65ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 11:14:49][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 11:14:53][0m  [36;1m[0.62ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:14:53][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:14:53][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 11:14:53][0m  [36;1m[2.01ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 11:15:02][0m  [36;1m[0.55ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:15:02][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:68)[0m 
[33m[2020-07-22 11:15:02][0m  [36;1m[0.42ms][0m  SELECT * FROM `tags`  WHERE (tag_name='å¼€æº') ORDER BY `tags`.`id` ASC LIMIT 1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:76)[0m 
[33m[2020-07-22 11:15:02][0m  [36;1m[0.79ms][0m   SELECT b.id,b.title,b.type_id,t.tag_name,b.description,b.recommend,b.numb,b.update_time,b.image,a.`type_name`  FROM `blogs` b LEFT JOIN `tag_blogs` tb ON b.id = tb.`blog_id` LEFT JOIN tags t ON tb.`tag_id`=t.`id` LEFT JOIN `types` a ON b.type_id = a.`id` WHERE t.`id`=4 ORDER BY b.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 11:15:02][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 11:15:03][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 11:15:03][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 11:15:03][0m  [36;1m[0.47ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 54, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:15:03][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:15:24][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:15:28][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.81ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.40ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.33ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:21:14][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:21:17][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.51ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 11:51:41][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.63ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.80ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.38ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.29ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:03:21][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.59ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:16:33][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:17:56][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 12:18:46][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 12:18:46][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 12:18:46][0m  [36;1m[0.42ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 55, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:18:46][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 12:23:14][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 12:23:14][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 12:23:14][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 56, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:23:14][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 12:23:32][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 12:23:32][0m  [36;1m[0.43ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 12:23:32][0m  [36;1m[0.43ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 57, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:23:32][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 12:23:37][0m  [36;1m[0.42ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 12:23:37][0m  [36;1m[0.49ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 12:23:37][0m  [36;1m[0.50ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 58, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:23:37][0m  [36;1m[0.30ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:28:57][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:30:48][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 12:31:06][0m  [36;1m[0.39ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 2)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 12:31:06][0m  [36;1m[0.47ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=2  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 12:31:06][0m  [36;1m[0.39ms][0m  UPDATE `blogs` SET `title` = 'è§£å†³Linuxå…³é—­ç»ˆç«¯åè¿è¡Œçš„ç¨‹åºè‡ªåŠ¨åœæ­¢', `content` = '# é—®é¢˜å‘ç°
  æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†
# è§£å†³åŠæ³•
    go build main.go
æ‰§è¡Œå®Œå

    nohup ./main &
è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†


[========]
# ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3696516981,3671280793&fm=26&gp=0.jpg', `numb` = 29, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†ï¼Œç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†ï¼ŒæŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†', `creat_time` = '2020-07-19 19:05:36', `update_time` = '2020-07-19 19:05:36', `type_id` = 2, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 3  
[36;31m[1 rows affected or returned ][0m 
<h1>é—®é¢˜å‘ç°</h1>

<p>æ˜¨å¤©åšå®¢å‘å¸ƒï¼Œæ“ä½œå®Œå…³é—­ç»ˆç«¯å°±ç¡äº†
  ç„¶è€Œä»Šå¤©é†’æ¥çªç„¶å‘ç°ç»ˆç«¯ä¸èƒ½è®¿é—®äº†
  æŸ¥çœ‹å‘ç°åŸæ¥åšå®¢é¡¹ç›®è¿›ç¨‹è¢«æ€æ­»äº†</p>

<h1>è§£å†³åŠæ³•</h1>

<pre><code>go build main.go
</code></pre>

<p>æ‰§è¡Œå®Œå</p>

<pre><code>nohup ./main &amp;
</code></pre>

<p>è®©ç¨‹åºåœ¨åå°è¿è¡Œå°±å¯äº†</p>

<p>[========]</p>

<h1>ps:è¿™ä¸ªæ–¹æ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯åˆšåˆšæ¥è§¦è¿˜ä¸çŸ¥é“æ€ä¹ˆåˆ‡å›æ¥</h1>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:31:06][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.36ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 12:55:51][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.53ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 14:12:35][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.43ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.42ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.38ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 48, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.37ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.29ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:12:38][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:15:49][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 14:21:16][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 14:41:20][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.46ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 1)  
[36;31m[2 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.44ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=1  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.41ms][0m  UPDATE `blogs` SET `title` = 'golangé¡¹ç›®ç®€å•æœåŠ¡å™¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘(linux)', `content` = '# æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell 
# é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨
# èˆ’æœåˆå¥½ç”¨

# 1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š
	## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
	[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl "Goè¯­è¨€ä¸­æ–‡ç½‘")
ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚

## ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š

![](https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
	è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
	æ–¹ä¾¿è§£å‹
## ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š

è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š

![](https://img-blog.csdnimg.cn/20190719143211340.png)
```
#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
```

è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
![](https://img-blog.csdnimg.cn/20190719143042938.png)
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
![](https://img-blog.csdnimg.cn/20190719143137645.png)
# 2.é…ç½®ç¯å¢ƒå˜é‡ï¼š
## ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š
![](https://img-blog.csdnimg.cn/20190719143506382.png)
## ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š
workspace
## ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š
src
pkg
bin
### è¯´æ˜ï¼š

	src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
	pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
	binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
## ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š

è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
![](https://img-blog.csdnimg.cn/20190719144319621.png)
```
#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
```
![](https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š
```
// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
```

## ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š
```
source /etc/profile
```
## Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š
```
go version
```
## ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š
```
go env
```
ç»“æœå¦‚ä¸‹ï¼š Â 
![](https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1,size_16,color_FFFFFF,t_70)Â 
# 3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š
åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç 
# 4è¿è¡Œ
```go
go build main.go
//æˆ–è€…
go run main.go
```
æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main & ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚

å‚è€ƒæ•™ç¨‹https://blog.csdn.net/qq_42410605/article/details/96479892', `image` = 'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3111860246,1925938903&fm=26&gp=0.jpg', `numb` = 49, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'ç®€å•åˆè¯¦ç»†çš„æ•™ç¨‹', `creat_time` = '2020-07-19 18:32:31', `update_time` = '2020-07-20 13:11:56', `type_id` = 1, `year` = 2020, `month` = 7, `day` = 19  WHERE `blogs`.`id` = 1  
[36;31m[1 rows affected or returned ][0m 
<h1>æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èä½¿ç”¨Xftpå’ŒXshell</h1>

<h1>é‡è¦æ˜¯ä¸ªäººå…è´¹ç”¨</h1>

<h1>èˆ’æœåˆå¥½ç”¨</h1>

<h1>1.ä¸‹è½½å®‰è£…goå®‰è£…åŒ…ï¼š</h1>

<pre><code>## ï¼ˆ1ï¼‰goè¯­è¨€ä¸‹è½½åœ°å€ï¼š
[Goè¯­è¨€ä¸­æ–‡ç½‘](https://studygolang.com/dl &#34;Goè¯­è¨€ä¸­æ–‡ç½‘&#34;)
</code></pre>

<p>ä¸‹è½½linuxç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚</p>

<h2>ï¼ˆ2ï¼‰ä½¿ç”¨Xftpå°†å®‰è£…åŒ…ä¸Šä¼ è‡³æŒ‡å®šçš„è·¯å¾„ï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719142701389.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
    è¿™é‡Œä¸Šä¼ åˆ°rootç›®å½•ä¸‹å°±è¡Œ
    æ–¹ä¾¿è§£å‹</p>

<h2>ï¼ˆ3ï¼‰è§£å‹å¹¶ç§»åˆ°/usr/local/ä¸‹ï¼š</h2>

<p>è¿›å…¥æŒ‡å®šç›®å½•ï¼ŒæŸ¥çœ‹å·²æœ‰æ–‡ä»¶å¹¶ä¸”è§£å‹æ–‡ä»¶ï¼š</p>

<p><img src="https://img-blog.csdnimg.cn/20190719143211340.png" alt=""/></p>

<pre><code>#åœ¨rootç›®å½•è¾“å…¥lsæŸ¥çœ‹ç›®å½•æ–‡ä»¶
ls
#åœ¨rootè§£å‹goåŒ…
tar -zxvf goçš„åŒ…å
</code></pre>

<p>è§£å‹å®Œæˆåå‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªgoæ–‡ä»¶å¤¹ï¼š
<img src="https://img-blog.csdnimg.cn/20190719143042938.png" alt=""/>
å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°/usr/local/
<img src="https://img-blog.csdnimg.cn/20190719143137645.png" alt=""/></p>

<h1>2.é…ç½®ç¯å¢ƒå˜é‡ï¼š</h1>

<h2>ï¼ˆ1ï¼‰è¿›å…¥ç›®çš„ç›®å½•æŸ¥çœ‹goæ–‡ä»¶å¤¹æ˜¯å¦ç§»åŠ¨æˆåŠŸï¼š</h2>

<p><img src="https://img-blog.csdnimg.cn/20190719143506382.png" alt=""/></p>

<h2>ï¼ˆ2ï¼‰åœ¨usrä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è‡ªå·±çš„é¡¹ç›®ï¼š</h2>

<p>workspace</p>

<h2>ï¼ˆ3ï¼‰è¿›å…¥æ–°å»ºçš„ç›®å½•workspaceæ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼š</h2>

<p>src
pkg
bin</p>

<h3>è¯´æ˜ï¼š</h3>

<pre><code>src ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç ï¼Œä¸åŒå·¥ç¨‹é¡¹ç›®çš„ä»£ç ä»¥åŒ…ååŒºåˆ†
pkg ç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶
binæ–‡ä»¶å¤¹å­˜æ”¾go installå‘½åç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å¤¹ä¼šé…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰
</code></pre>

<h2>ï¼ˆ4ï¼‰é…ç½®ç¯å¢ƒå˜é‡ï¼š</h2>

<p>è¿›å…¥ /etc ä¿®æ”¹profileæ–‡ä»¶ï¼š
<img src="https://img-blog.csdnimg.cn/20190719144319621.png" alt=""/></p>

<pre><code>#è¿›å…¥etcç›®å½•
cd /etc/
#é…ç½® profile
vim profile
</code></pre>

<p><img src="https://img-blog.csdnimg.cn/20190719145650864.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>
åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹åŠ å…¥ä¸Šå›¾çš„ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>// è®¾ç½®goå®‰è£…è·¯å¾„
export GOROOT=/usr/local/go
export PATH=$PATH:$GOROOT/bin
 
// è®¾ç½®å·¥ç¨‹ç›®å½•
export GOPATH=/usr/workspace
export PATH=$PATH:$GOPATH/bin
</code></pre>

<h2>ï¼ˆ5ï¼‰åˆ·æ–°ç¯å¢ƒå˜é‡ï¼š</h2>

<pre><code>source /etc/profile
</code></pre>

<h2>Â ï¼ˆ6ï¼‰æŸ¥çœ‹goç¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š</h2>

<pre><code>go version
</code></pre>

<h2>ï¼ˆ7ï¼‰æŸ¥çœ‹è¯¦ç»†é…ç½®ï¼š</h2>

<pre><code>go env
</code></pre>

<p>ç»“æœå¦‚ä¸‹ï¼š Â 
<img src="https://img-blog.csdnimg.cn/20190719145255720.png?x-oss-process=image%2Fwatermark%2Ctype_ZmFuZ3poZW5naGVpdGk%2Cshadow_10%2Ctext_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNDEwNjA1%2Csize_16%2Ccolor_FFFFFF%2Ct_70" alt=""/>Â </p>

<h1>3.ä¸Šä¼ é¡¹ç›®ä»£ç ï¼š</h1>

<p>åœ¨åˆšåˆšåˆ›å»ºçš„workspaceä¸‹æ–°åˆ›å»ºçš„ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œsrc ç›®å½•å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„goæºä»£ç </p>

<h1>4è¿è¡Œ</h1>

<pre><code class="language-go">go build main.go
//æˆ–è€…
go run main.go
</code></pre>

<p>æœ€åæ‰§è¡Œ ./main å°±è¡Œäº†ã€‚
å¦‚æœæƒ³è®©é¡¹ç›®åœ¨åå°æ‰§è¡Œï¼šæ‰§è¡Œ nohup ./main &amp; ï¼Œè¿™æ ·å°±å¯ä»¥ç¨‹åºåœ¨åå°è¿è¡Œäº†ã€‚</p>

<p>å‚è€ƒæ•™ç¨‹<a href="https://blog.csdn.net/qq_42410605/article/details/96479892" rel="nofollow">https://blog.csdn.net/qq_42410605/article/details/96479892</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.27ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.36ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 1)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.38ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 2)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 4)  
[36;31m[0 rows affected or returned ][0m 
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
[{2 1 1 æµ‹è¯•å‘˜1 like admin@qq.com /static/images/å¤´åƒ1.png æµ‹è¯•å›å¤åŠŸèƒ½ 2020-07-20 13:15:56 <nil> []} {4 1 2 è‚–æµ© æµ‹è¯•å‘˜1 1037432782@qq.com /static/images/å¤´åƒ3.png æµ‹è¯•æˆåŠŸ 2020-07-20 13:16:57 <nil> []}]
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.33ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 3)  
[36;31m[1 rows affected or returned ][0m 
ifåˆ¤æ–­2
foråˆ¤æ–­1
ifåˆ¤æ–­1

[35m(/usr/workspace/src/blog/dao/comment.go:26)[0m 
[33m[2020-07-22 14:41:22][0m  [36;1m[0.30ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = 5)  
[36;31m[0 rows affected or returned ][0m 
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]
[{5 1 3 like ç‹—ç§‘ 535889315@qq.com /static/images/header.jpg ï¼Ÿï¼Ÿï¼Ÿ 2020-07-20 13:30:17 <nil> []}]

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.24ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:07:24][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:26:55][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.63ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.70ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.64ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:26:56][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:26:57][0m  [36;1m[0.54ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:26:57][0m  [36;1m[0.24ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:26:57][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:26:57][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:26:58][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:26:58][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:26:58][0m  [36;1m[0.73ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:26:58][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.69ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.49ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.35ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:26:59][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:33:28][0m  [36;1m[0.36ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:30][0m  [36;1m[0.58ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:33:39][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.61ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:33:47][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:33:53][0m  [36;1m[0.59ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:53][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:33:53][0m  [36;1m[0.71ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:33:53][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:33:55][0m  [36;1m[0.52ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:55][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:33:55][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:33:55][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.63ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[1.30ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.76ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.42ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.35ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:33:56][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:33:57][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.32ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:00][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:01][0m  [36;1m[0.50ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:01][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:01][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:01][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:02][0m  [36;1m[0.56ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[2.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[0.30ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:04][0m  [36;1m[0.32ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:05][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:05][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:05][0m  [36;1m[0.83ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:05][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:34:07][0m  [36;1m[0.60ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:07][0m  [36;1m[0.35ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:07][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:34:07][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.62ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:08][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:09][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:09][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:09][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:09][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:34:11][0m  [36;1m[0.52ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:11][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:11][0m  [36;1m[0.65ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:34:11][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.55ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.72ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.89ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.55ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.46ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.45ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:12][0m  [36;1m[0.44ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:13][0m  [36;1m[0.52ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:13][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:13][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:13][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.55ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.25ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.53ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.26ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:14][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.60ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.74ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.34ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:15][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:16][0m  [36;1m[0.58ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:16][0m  [36;1m[0.34ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:16][0m  [36;1m[0.85ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:16][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:34:17][0m  [36;1m[0.92ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:17][0m  [36;1m[2.12ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:17][0m  [36;1m[0.68ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:34:17][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.23ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.67ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.70ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.71ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.67ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.43ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.46ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.39ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:34:18][0m  [36;1m[0.41ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.78ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.37ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:19][0m  [36;1m[0.34ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.69ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.33ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.25ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:22][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.79ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.96ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.27ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.41ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.35ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:25][0m  [36;1m[0.43ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.64ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.83ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.35ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.31ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:27][0m  [36;1m[0.38ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:34:36][0m  [36;1m[0.60ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:36][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:36][0m  [36;1m[0.75ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:34:36][0m  [36;1m[0.22ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.34ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.30ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:34:37][0m  [36;1m[0.35ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[0.92ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[0.28ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/types.go:52)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[1.29ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id WHERE (type_id = 4) ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[4.98ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/comment.go:17)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[3.13ms][0m  SELECT * FROM `comments`  WHERE (re_comment_id = -1 AND blog_id = 4)  
[36;31m[0 rows affected or returned ][0m 
<nil> é”™è¯¯111111111

[35m(/usr/workspace/src/blog/dao/tags.go:86)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[0.54ms][0m   SELECT t.id,t.tag_name FROM `tags` t LEFT JOIN `tag_blogs` tb ON t.id = tb.`tag_id` LEFT JOIN `blogs` b ON tb.`blog_id`=b.`id`  WHERE b.`id`=4  
[36;31m[2 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:14)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[0.44ms][0m  UPDATE `blogs` SET `title` = 'æœ¬åšå®¢å¼€æºå…¬å‘Š', `content` = 'ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ
# è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ
## å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº
## åšå®¢è¯­è¨€è¯´æ˜
#### æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™
å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„
#### åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™
#ä¸€ã€åšå®¢ç®€ä»‹
## 1.åšå®¢ç›®å½•

    blog
    â”œâ”€â”€â”€â”€controller
	â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
	|	|	â”œâ”€â”€adminblog.go
	|	|	â”œâ”€â”€â”€adminController.go
	|	|	â”œâ”€â”€adminTag.go
	|	|	â”œâ”€â”€adminType.go
	|	|	â””â”€â”€adminUser.go
	|	â””â”€â”€page
	|		â”œâ”€â”€404.go
	|		â”œâ”€â”€â”€about.go
	|		â”œâ”€â”€archives.go
	|		â”œâ”€â”€blog.go
	|		â”œâ”€â”€comment.go
	|		â”œâ”€â”€pagesController.go
	|		â”œâ”€â”€researchController.go
	|		â””â”€â”€tagsController.go
    â”œâ”€â”€ dao
	â”‚	â”œâ”€â”€blogs.go
	â”‚	â”œâ”€â”€comment.go
	â”‚	â”œâ”€â”€sql.go
	â”‚	â”œâ”€â”€tags.go
	â”‚	â”œâ”€â”€types.go
	â”‚	â””â”€â”€user.go
    â”œâ”€â”€ logic
    â”‚   â””â”€â”€ user.go
    â”œâ”€â”€ middlerware
	â”‚	â”œâ”€â”€function.go
	â”‚	â”œâ”€â”€getImg.go
	â”‚	â”œâ”€â”€getTime.go
	â”‚	â”œâ”€â”€markdown.go
	â”‚	â”œâ”€â”€select.go
	â”‚	â””â”€â”€session.go
    â”œâ”€â”€ model
	â”‚	â”œâ”€â”€blog.go
	â”‚	â”œâ”€â”€commnent.go
	â”‚	â”œâ”€â”€tag.go
	â”‚	â”œâ”€â”€type.go
	â”‚	â””â”€â”€user/go
    â”œâ”€â”€ static
	â”‚	â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
    â”œâ”€â”€ templates
	â”‚	â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
    â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
    â””â”€â”€ main.go
    

## 2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹
### 1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½
commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Comment struct {
	Id     int //è¯„è®ºid
	BlogId int //åšæ–‡id
	ReCommentId    int    //çˆ¶è¯„è®ºid
	CommentName string //è¯„è®ºäººå§“å
	ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
	CommentEmail   string
	Img            string
	CommentContent string `gorm:"type:text" form:"CommentContent" json:"CommentContent"` //è¯„è®ºå†…å®¹
	CommentTime    string ` json:"comment_time,omitempty"`
	Parent         *Comment
	Comments       []Comment
}
```
#### å®ç°æ–¹æ³•
##### 1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º
çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º
##### 2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º
åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º
###### ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º
```go
var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
	var comments []model.Comment
	DB.Debug().Where("re_comment_id = -1 AND blog_id = ?", id).Find(&comments)
	return &comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
	if count != 0 {
		fmt.Println("ifåˆ¤æ–­1")
		var comments []model.Comment
		DB.Debug().Where("re_comment_id = ?", id).Find(&comments)
		count = len(comments)
		if count != 0 {
			fmt.Println("ifåˆ¤æ–­2")
			for _, comment := range comments {
				fmt.Println("foråˆ¤æ–­1")
				Comments = append(Comments, comment)
				SelectCommentByComment(comment.Id, count)
			}
		}
	}
	fmt.Println(Comments)
	return &Comments

}
```
psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥
###### ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› 
å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡
###### ï¼ˆ3ï¼‰è§£å†³é—®é¢˜
```go
func ClearComments() bool {
	var comments []model.Comment
	Comments = comments
	return true
}

```
è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°
#### è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½
```go
if  CommentName == user.Name && CommentEmail == user.UserEmail {
		fmt.Println("è¿›å…¥äº†1")
		comment.Img =user.UserImg
		//æ‰¾ç›¸åŒè¯„è®ºäºº
	}else if CommentName == one.CommentName && CommentEmail == one.CommentEmail {
		fmt.Println("è¿›å…¥äº†2")
		comment.Img =one.Img
		//éšæœºé€‰å¤´åƒ
	}else{
		fmt.Println("è¿›å…¥äº†3")
		comment.Img =middleware.GetImg()
	}
```
##### 123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“
1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
![](/static/images/%e5%a4%b4%e5%83%8f1.png)![](/static/images/%e5%a4%b4%e5%83%8f2.png)![](/static/images/%e5%a4%b4%e5%83%8f3.png)![](/static/images/%e5%a4%b4%e5%83%8f4.png)![](/static/images/%e5%a4%b4%e5%83%8f5.png)![](/static/images/%e5%a4%b4%e5%83%8f6.png)
### 2ã€å½’æ¡£åŠŸèƒ½
#### blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹
```go
package model

type Blog struct {
	Id           int
	Title        string    `form:"title" json:"title"`                          //æ ‡é¢˜
	Content      string    `gorm:"type:longtext" form:"content" json:"content"` //å†…å®¹
	Image        string    `gorm:"type:text" form:"image" json:"image"`         //é¦–å›¾
	Numb         int       `form:"numb" json:"numb"`                            //æ¬¡æ•°
	Flag         string    `form:"flag" json:"flag"`                            //åŸåˆ›æˆ–è€…è½¬è½½
	Appreciation string    `form:"appreciation" json:"appreciation"`            //æ‰“èµå¼€å…³
	ShareInfo    string    `form:"shareInfo" json:"shareInfo"`                  //ç‰ˆæƒå¼€å…³
	Comment      string    `form:"comment" json:"comment"`                      //è¯„è®ºå¼€å…³
	Recommend    string    `form:"recommend" json:"recommend"`                  //æ¨èå¼€å…³
	Description  string    `gorm:"type:text" form:"description" json:"description"`
	CreatTime    string    `form:"creatTime"  json:"creat_time,omitempty"`   //åˆ›å»ºæ—¶é—´
	UpdateTime   string    `form:"updateTime"  json:"update_time,omitempty"` //æ›´æ–°æ—¶é—´
	Comments     []Comment `form:"comments" json:"comments"`
	TypeId       int       `form:"typeId" json:"typeId"`
	Type         Type      `form:"type" gorm:"ForeignKey:TypeId"`
	Year         int       `form:"year" json:"year"`
	Month        int       `form:"month" json:"month"`
	Day          int       `form:"day" json:"day"`
}

```
#### å®ç°æ–¹æ³•
æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day 
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢
##### Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤
###### ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢
###### ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½
å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­
###### ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« 
ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« 
#### è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°


## 3.å·²çŸ¥BUG
### åå°é€€å‡ºåŠŸèƒ½
åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§

å¼€æºåœ°å€
[github](https://github.com/likewl/blog "github")
[gitee](https://gitee.com/nculike/blog "gitee")', `image` = 'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1535821573,4166447487&fm=26&gp=0.jpg', `numb` = 59, `flag` = 'åŸåˆ›', `appreciation` = 'æ˜¯', `share_info` = 'æ˜¯', `comment` = 'æ˜¯', `recommend` = 'æ˜¯', `description` = 'æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™', `creat_time` = '2020-07-20 15:24:23', `update_time` = '2020-07-20 15:24:23', `type_id` = 4, `year` = 2020, `month` = 7, `day` = 20  WHERE `blogs`.`id` = 4  
[36;31m[1 rows affected or returned ][0m 
<p>ä»Šå¤©æœ¬åšå®¢è¯„è®ºåŠŸèƒ½å‘å¸ƒ</p>

<h1>è‡ªä»Šå¤©èµ·ï¼Œæœ¬åšå®¢åŸºæœ¬åŠŸèƒ½å·²ç»å®Œæˆ</h1>

<h2>å‘å¸ƒV1.0ç‰ˆæœ¬å¹¶å¼€æº</h2>

<h2>åšå®¢è¯­è¨€è¯´æ˜</h2>

<h4>æœ¬åšå®¢åç«¯æ˜¯ç”¨golang çš„ginæ¡†æ¶+gormç¼–å†™</h4>

<p>å‰ç«¯æ¨¡æ¿æ˜¯ä»Bç«™å€Ÿé‰´çš„springBootæ•™å­¦è§†é¢‘æ¨¡æ¿
åŸè°…æˆ‘ç°åœ¨å¯¹å‰ç«¯jsä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æˆ‘ä¼šé‡å†™å‰ç«¯ä»£ç çš„</p>

<h4>åšå®¢æ•ˆæœå‚è€ƒæœ¬ç«™</h4>

<p>#ä¸€ã€åšå®¢ç®€ä»‹</p>

<h2>1.åšå®¢ç›®å½•</h2>

<pre><code>blog
â”œâ”€â”€â”€â”€controller
â”œâ”€â”€â”€â”€â””â”€â”€â”€admin
|   |   â”œâ”€â”€adminblog.go
|   |   â”œâ”€â”€â”€adminController.go
|   |   â”œâ”€â”€adminTag.go
|   |   â”œâ”€â”€adminType.go
|   |   â””â”€â”€adminUser.go
|   â””â”€â”€page
|       â”œâ”€â”€404.go
|       â”œâ”€â”€â”€about.go
|       â”œâ”€â”€archives.go
|       â”œâ”€â”€blog.go
|       â”œâ”€â”€comment.go
|       â”œâ”€â”€pagesController.go
|       â”œâ”€â”€researchController.go
|       â””â”€â”€tagsController.go
â”œâ”€â”€ dao
â”‚   â”œâ”€â”€blogs.go
â”‚   â”œâ”€â”€comment.go
â”‚   â”œâ”€â”€sql.go
â”‚   â”œâ”€â”€tags.go
â”‚   â”œâ”€â”€types.go
â”‚   â””â”€â”€user.go
â”œâ”€â”€ logic
â”‚   â””â”€â”€ user.go
â”œâ”€â”€ middlerware
â”‚   â”œâ”€â”€function.go
â”‚   â”œâ”€â”€getImg.go
â”‚   â”œâ”€â”€getTime.go
â”‚   â”œâ”€â”€markdown.go
â”‚   â”œâ”€â”€select.go
â”‚   â””â”€â”€session.go
â”œâ”€â”€ model
â”‚   â”œâ”€â”€blog.go
â”‚   â”œâ”€â”€commnent.go
â”‚   â”œâ”€â”€tag.go
â”‚   â”œâ”€â”€type.go
â”‚   â””â”€â”€user/go
â”œâ”€â”€ static
â”‚   â””â”€â”€é™æ€æ–‡ä»¶ï¼ˆå¤´åƒã€å›¾ç‰‡ã€logoã€cssã€jsç­‰ï¼‰
â”œâ”€â”€ templates
â”‚   â””â”€â”€htmlæ¨¡æ¿æ–‡ä»¶
â”œâ”€â”€ go.modï¼ˆä¾èµ–ï¼‰
â””â”€â”€ main.go
</code></pre>

<h2>2.ç›¸å…³åŠŸèƒ½å®ç°ç®€ä»‹</h2>

<h3>1ã€è¯„è®ºåŠå›å¤åŠŸèƒ½</h3>

<p>commentçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</p>

<pre><code class="language-go">package model

type Comment struct {
    Id     int //è¯„è®ºid
    BlogId int //åšæ–‡id
    ReCommentId    int    //çˆ¶è¯„è®ºid
    CommentName string //è¯„è®ºäººå§“å
    ReCommentName  string //çˆ¶è¯„è®ºäººå§“å
    CommentEmail   string
    Img            string
    CommentContent string `gorm:&#34;type:text&#34; form:&#34;CommentContent&#34; json:&#34;CommentContent&#34;` //è¯„è®ºå†…å®¹
    CommentTime    string ` json:&#34;comment_time,omitempty&#34;`
    Parent         *Comment
    Comments       []Comment
}
</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<h5>1å…ˆé€šè¿‡æŸ¥æ‰¾çˆ¶è¯„è®ºä¸º-1çš„é¡¶çº§è¯„è®º</h5>

<p>çˆ¶è¯„è®ºIdä¸º-1è¯´æ˜ä»–ä¸æ˜¯ä»»ä½•è¯„è®ºçš„å­è¯„è®º</p>

<h5>2åœ¨htmlä¸Šéå†æ‰€æœ‰çš„é¡¶çº§è¯„è®º</h5>

<p>åœ¨éå†çš„åŒæ—¶ï¼Œæ¯éå†ä¸€ä¸ªé¡¶çº§è¯„è®ºå°±éœ€è¦å†æŸ¥è¯¢çš„å®ƒå­è¯„è®º</p>

<h6>ï¼ˆ1ï¼‰é€’å½’å­˜å‚¨æ¯ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º</h6>

<p>è¿™é‡Œæˆ‘ç”¨ä¸€ä¸ªåˆ‡ç‰‡æ¥å‚¨å­˜ä¸€ä¸ªé¡¶çº§è¯„è®ºçš„æ‰€æœ‰å­è¯„è®º</p>

<pre><code class="language-go">var Comments []model.Comment

//æ‰¾åˆ°çˆ¶è¯„è®º
func SelectCommentByBlog(id int) *[]model.Comment {
    var comments []model.Comment
    DB.Debug().Where(&#34;re_comment_id = -1 AND blog_id = ?&#34;, id).Find(&amp;comments)
    return &amp;comments
}

//æ‰¾å¯¹åº”çš„å­è¯„è®º
func SelectCommentByComment(id int, count int) *[]model.Comment {
    if count != 0 {
        fmt.Println(&#34;ifåˆ¤æ–­1&#34;)
        var comments []model.Comment
        DB.Debug().Where(&#34;re_comment_id = ?&#34;, id).Find(&amp;comments)
        count = len(comments)
        if count != 0 {
            fmt.Println(&#34;ifåˆ¤æ–­2&#34;)
            for _, comment := range comments {
                fmt.Println(&#34;foråˆ¤æ–­1&#34;)
                Comments = append(Comments, comment)
                SelectCommentByComment(comment.Id, count)
            }
        }
    }
    fmt.Println(Comments)
    return &amp;Comments

}
</code></pre>

<p>psï¼šè¯·å¿½ç•¥å¤šå±‚ifä¸­é—´é‚£å±‚æ²¡å•¥ç”¨ï¼Œå¯æˆ‘æ‡’å¾—åˆ çš„
è¿™é‡Œç†æƒ³æ˜¯å¥½çš„
å¯æœ‰ä¸€ç‚¹å°å°çš„é—®é¢˜
å°±æ˜¯ä½ å›å¤è¯„è®ºæ²¡å•¥é—®é¢˜
å¯åˆ·æ–°é¡µé¢å°±ä¼šè«åå¤šå‡ºä¸€æ¡è¯„è®º
è¶Šåˆ·æ–°è¶Šå¤š
ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘åºŸäº†å¥½é•¿æ—¶é—´
è¿™å°±æ˜¯ä»£ç ä¸­é‚£ä¹ˆå¤šifå’Œfmt.Printlnçš„ç”±æ¥</p>

<h6>ï¼ˆ2ï¼‰å‡ºç°é—®é¢˜çš„åŸå› </h6>

<p>å› ä¸ºæˆ‘ç”¨çš„æ˜¯åˆ‡ç‰‡ï¼Œè¿˜æ˜¯å…¨å±€åˆ‡ç‰‡
æ‰€æœ‰çš„é¡¶çº§è¯„è®ºçš„å­è¯„è®ºéƒ½æ˜¯ç”¨çš„è¿™ä¸ªåˆ‡ç‰‡
å¯ä¹‹å‰ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®ºç¼ºæ²¡æœ‰æ¸…é™¤
è¿™å°±ä¼šå¯¼è‡´åˆ‡ç‰‡ä¸­å­˜å‚¨çš„è¶Šæ¥è¶Šå¤š
æ¯æ¬¡åˆ·æ–°é¡µé¢å°±ä¼šæˆå€çš„å¢åŠ å­è¯„è®ºæ•°é‡</p>

<h6>ï¼ˆ3ï¼‰è§£å†³é—®é¢˜</h6>

<pre><code class="language-go">func ClearComments() bool {
    var comments []model.Comment
    Comments = comments
    return true
}

</code></pre>

<p>è¿™æ˜¯æˆ‘ç”¨äº†ä¸€ä¸ªClearComments()å‡½æ•°æ¥æ¸…é™¤Commentsåˆ‡ç‰‡ä¸­ä¸Šä¸€ä¸ªé¡¶çº§è¯„è®ºçš„å­è¯„è®º
è‡ªæ­¤ï¼Œè¯„è®ºåŠŸèƒ½å®ç°</p>

<h4>è¿™é‡Œæˆ‘è¿˜åŠ äº†ä¸€ä¸ªå°å°çš„éšæœºå¤´åƒåŠŸèƒ½</h4>

<pre><code class="language-go">if  CommentName == user.Name &amp;&amp; CommentEmail == user.UserEmail {
        fmt.Println(&#34;è¿›å…¥äº†1&#34;)
        comment.Img =user.UserImg
        //æ‰¾ç›¸åŒè¯„è®ºäºº
    }else if CommentName == one.CommentName &amp;&amp; CommentEmail == one.CommentEmail {
        fmt.Println(&#34;è¿›å…¥äº†2&#34;)
        comment.Img =one.Img
        //éšæœºé€‰å¤´åƒ
    }else{
        fmt.Println(&#34;è¿›å…¥äº†3&#34;)
        comment.Img =middleware.GetImg()
    }
</code></pre>

<h5>123åˆ†åˆ«ä»£è¡¨ä¸‰ç§ä¸åŒçš„ç”¨æˆ·ç¾¤ä½“</h5>

<p>1ä»£è¡¨åšä¸»
2ä»£è¡¨ä¹‹å‰è¯„è®ºè¿‡çš„äºº
3ä»£è¡¨æ²¡æœ‰è¯„è®ºè¿‡çš„äºº
å¯¹äºæ²¡æœ‰è¯„è®ºè¿‡çš„éšæœºç»™taä¸ªå¤´åƒ
<img src="/static/images/%e5%a4%b4%e5%83%8f1.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f2.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f3.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f4.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f5.png" alt=""/><img src="/static/images/%e5%a4%b4%e5%83%8f6.png" alt=""/></p>

<h3>2ã€å½’æ¡£åŠŸèƒ½</h3>

<h4>blogçš„ç»“æ„ä½“å±æ€§å¦‚ä¸‹</h4>

<pre><code class="language-go">package model

type Blog struct {
    Id           int
    Title        string    `form:&#34;title&#34; json:&#34;title&#34;`                          //æ ‡é¢˜
    Content      string    `gorm:&#34;type:longtext&#34; form:&#34;content&#34; json:&#34;content&#34;` //å†…å®¹
    Image        string    `gorm:&#34;type:text&#34; form:&#34;image&#34; json:&#34;image&#34;`         //é¦–å›¾
    Numb         int       `form:&#34;numb&#34; json:&#34;numb&#34;`                            //æ¬¡æ•°
    Flag         string    `form:&#34;flag&#34; json:&#34;flag&#34;`                            //åŸåˆ›æˆ–è€…è½¬è½½
    Appreciation string    `form:&#34;appreciation&#34; json:&#34;appreciation&#34;`            //æ‰“èµå¼€å…³
    ShareInfo    string    `form:&#34;shareInfo&#34; json:&#34;shareInfo&#34;`                  //ç‰ˆæƒå¼€å…³
    Comment      string    `form:&#34;comment&#34; json:&#34;comment&#34;`                      //è¯„è®ºå¼€å…³
    Recommend    string    `form:&#34;recommend&#34; json:&#34;recommend&#34;`                  //æ¨èå¼€å…³
    Description  string    `gorm:&#34;type:text&#34; form:&#34;description&#34; json:&#34;description&#34;`
    CreatTime    string    `form:&#34;creatTime&#34;  json:&#34;creat_time,omitempty&#34;`   //åˆ›å»ºæ—¶é—´
    UpdateTime   string    `form:&#34;updateTime&#34;  json:&#34;update_time,omitempty&#34;` //æ›´æ–°æ—¶é—´
    Comments     []Comment `form:&#34;comments&#34; json:&#34;comments&#34;`
    TypeId       int       `form:&#34;typeId&#34; json:&#34;typeId&#34;`
    Type         Type      `form:&#34;type&#34; gorm:&#34;ForeignKey:TypeId&#34;`
    Year         int       `form:&#34;year&#34; json:&#34;year&#34;`
    Month        int       `form:&#34;month&#34; json:&#34;month&#34;`
    Day          int       `form:&#34;day&#34; json:&#34;day&#34;`
}

</code></pre>

<h4>å®ç°æ–¹æ³•</h4>

<p>æˆ‘çš„æ€è·¯æ˜¯åˆ›å»ºä¸‰ä¸ªæ—¶é—´èŠ‚ç‚¹
year month day
åˆ©ç”¨sqlåˆ†ç»„æŸ¥è¯¢</p>

<h5>Group Byåˆ†ç»„æŸ¥è¯¢æ­¥éª¤</h5>

<h6>ï¼ˆ1ï¼‰å…ˆæŒ‰ç…§å¹´ä»½æŸ¥è¯¢</h6>

<h6>ï¼ˆ2ï¼‰å†æŒ‰ç…§å¹´ä»½éå†æ¯ä¸ªæœˆä»½</h6>

<p>å¹¶å°†æ‰€æœ‰ä¿å­˜åœ¨ä¸€ä¸ªåˆ‡ç‰‡ä¸­</p>

<h6>ï¼ˆ3ï¼‰æŒ‰ç…§æœˆä»½éå†æ¯ä¸ªæœˆçš„æ‰€æœ‰æ–‡ç« </h6>

<p>ä¿å­˜åœ¨ä¸€ä¸ªMapä¸­ï¼Œkeyæ˜¯å¯¹åº”çš„æœˆä»½ï¼Œvalueæ˜¯æ¯ä¸ªæœˆä»½çš„æ‰€æœ‰æ–‡ç« </p>

<h4>è‡ªæ­¤å½’æ¡£åŠŸèƒ½å®ç°</h4>

<h2>3.å·²çŸ¥BUG</h2>

<h3>åå°é€€å‡ºåŠŸèƒ½</h3>

<p>åå°ç™»å½•åç¬¬ä¸€æ¬¡ç‚¹é€€å‡ºå¯ä»¥é€€å‡ºï¼Œä¹‹åå°±ä¸è¡Œäº†
æˆ‘æ€€ç–‘æ˜¯sessionå‡ºäº†é—®é¢˜ï¼Œä¹‹åæˆ‘æŸ¥æŸ¥çœ‹å§</p>

<p>å¼€æºåœ°å€
<a href="https://github.com/likewl/blog" title="github" rel="nofollow">github</a>
<a href="https://gitee.com/nculike/blog" title="gitee" rel="nofollow">gitee</a></p>


[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:23][0m  [36;1m[1.68ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.54ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.72ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.17ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.29ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.28ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:36:26][0m  [36;1m[0.30ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:36:39][0m  [36;1m[0.55ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:39][0m  [36;1m[0.29ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:39][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:36:39][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.76ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.19ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.28ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.26ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:36:40][0m  [36;1m[0.31ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:27)[0m 
[33m[2020-07-22 15:36:45][0m  [36;1m[0.54ms][0m  SELECT * FROM `types`    
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:45][0m  [36;1m[0.28ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:45][0m  [36;1m[0.66ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:32)[0m 
[33m[2020-07-22 15:36:45][0m  [36;1m[0.18ms][0m  SELECT count(*) FROM `types`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:26)[0m 
[33m[2020-07-22 15:36:46][0m  [36;1m[0.55ms][0m  SELECT * FROM `tags`    
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:46][0m  [36;1m[0.33ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:46][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/tags.go:31)[0m 
[33m[2020-07-22 15:36:46][0m  [36;1m[0.20ms][0m  SELECT count(*) FROM `tags`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.57ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.23ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:144)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.61ms][0m   SELECT * FROM `blogs` GROUP BY YEAR DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:157)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.68ms][0m   SELECT * FROM `blogs` where year = 2020 GROUP BY month DESC  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:169)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.66ms][0m   SELECT * FROM `blogs` where year = 2020 and month = 7 ORDER BY `id` DESC  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=4  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.38ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=3  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.33ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=2  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:65)[0m 
[33m[2020-07-22 15:36:47][0m  [36;1m[0.34ms][0m   SELECT t.id,t.type_name FROM `types` t LEFT JOIN `blogs` b ON t.id = b.`type_id` WHERE b.`id`=1  
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/user.go:7)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.52ms][0m  SELECT * FROM `users`    
[36;31m[1 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:101)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.70ms][0m  SELECT blogs.id,blogs.title,types.type_name,blogs.description,blogs.recommend,blogs.numb,blogs.update_time,blogs.image FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY blogs.id  DESC LIMIT 10 OFFSET 0  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:107)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.21ms][0m  SELECT count(*) FROM `blogs`    
[36;31m[0 rows affected or returned ][0m 
4

[35m(/usr/workspace/src/blog/dao/tags.go:56)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.31ms][0m   SELECT * FROM `tags` ORDER BY RAND() LIMIT 10  
[36;31m[5 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/types.go:37)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.27ms][0m   SELECT * FROM `types` ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 

[35m(/usr/workspace/src/blog/dao/blogs.go:114)[0m 
[33m[2020-07-22 15:36:48][0m  [36;1m[0.33ms][0m  SELECT blogs.id,blogs.title,types.type_name FROM `blogs` left join types on types.id = blogs.type_id  ORDER BY RAND() LIMIT 5  
[36;31m[4 rows affected or returned ][0m 
